"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var r=require("vue"),Hn;const So=typeof window!="undefined",_i=e=>typeof e!="undefined",on=e=>typeof e=="function",bi=e=>typeof e=="string",Dt=()=>{};So&&((Hn=window==null?void 0:window.navigator)==null?void 0:Hn.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ee(e){return typeof e=="function"?e():r.unref(e)}function ki(e,t){function n(...o){e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})}return n}const Co=e=>e();function Ni(e=Co){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}return{isActive:t,pause:n,resume:o,eventFilter:(...a)=>{t.value&&e(...a)}}}function Ln(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Ei(e){return e}function ct(e,t){let n,o,i;const a=r.ref(!0),l=()=>{a.value=!0,i()};r.watch(e,l,{flush:"sync"});const s=on(t)?t:t.get,u=on(t)?void 0:t.set,c=r.customRef((d,v)=>(o=d,i=v,{get(){return a.value&&(n=s(),a.value=!1),o(),n},set(f){u==null||u(f)}}));return Object.isExtensible(c)&&(c.trigger=l),c}function Z(){const e=[],t=i=>{const a=e.indexOf(i);a!==-1&&e.splice(a,1)};return{on:i=>(e.push(i),{off:()=>t(i)}),off:t,trigger:i=>{e.forEach(a=>a(i))}}}function Xe(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function wn(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function Ve(e){let t=!1;function n(v,{flush:f="sync",deep:x=!1,timeout:g,throwOnTimeout:m}={}){let h=null;const R=[new Promise(C=>{h=r.watch(e,y=>{v(y)!==t&&(h==null||h(),C(y))},{flush:f,deep:x,immediate:!0})})];return g!=null&&R.push(Ln(g,m).then(()=>Ee(e)).finally(()=>h==null?void 0:h())),Promise.race(R)}function o(v,f){if(!r.isRef(v))return n(y=>y===v,f);const{flush:x="sync",deep:g=!1,timeout:m,throwOnTimeout:h}=f!=null?f:{};let _=null;const C=[new Promise(y=>{_=r.watch([e,v],([$,N])=>{t!==($===N)&&(_==null||_(),y($))},{flush:x,deep:g,immediate:!0})})];return m!=null&&C.push(Ln(m,h).then(()=>Ee(e)).finally(()=>(_==null||_(),Ee(e)))),Promise.race(C)}function i(v){return n(f=>Boolean(f),v)}function a(v){return o(null,v)}function l(v){return o(void 0,v)}function s(v){return n(Number.isNaN,v)}function u(v,f){return n(x=>{const g=Array.from(x);return g.includes(v)||g.includes(Ee(v))},f)}function c(v){return d(1,v)}function d(v=1,f){let x=-1;return n(()=>(x+=1,x>=v),f)}return Array.isArray(Ee(e))?{toMatch:n,toContains:u,changed:c,changedTimes:d,get not(){return t=!t,this}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:l,changed:c,changedTimes:d,get not(){return t=!t,this}}}var Fn=Object.getOwnPropertySymbols,Si=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,$i=(e,t)=>{var n={};for(var o in e)Si.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Fn)for(var o of Fn(e))t.indexOf(o)<0&&Ci.call(e,o)&&(n[o]=e[o]);return n};function Mi(e,t,n={}){const o=n,{eventFilter:i=Co}=o,a=$i(o,["eventFilter"]);return r.watch(e,ki(i,t),a)}var Bi=Object.defineProperty,Ri=Object.defineProperties,zi=Object.getOwnPropertyDescriptors,dt=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Mo=Object.prototype.propertyIsEnumerable,Zn=(e,t,n)=>t in e?Bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oi=(e,t)=>{for(var n in t||(t={}))$o.call(t,n)&&Zn(e,n,t[n]);if(dt)for(var n of dt(t))Mo.call(t,n)&&Zn(e,n,t[n]);return e},Pi=(e,t)=>Ri(e,zi(t)),Ti=(e,t)=>{var n={};for(var o in e)$o.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&dt)for(var o of dt(e))t.indexOf(o)<0&&Mo.call(e,o)&&(n[o]=e[o]);return n};function ke(e,t,n={}){const o=n,{eventFilter:i}=o,a=Ti(o,["eventFilter"]),{eventFilter:l,pause:s,resume:u,isActive:c}=Ni(i);return{stop:Mi(e,t,Pi(Oi({},a),{eventFilter:l})),pause:s,resume:u,isActive:c}}function ft(e){var t;const n=Ee(e);return(t=n==null?void 0:n.$el)!=null?t:n}const xn=So?window:void 0;function re(...e){let t,n,o,i;if(bi(e[0])?([n,o,i]=e,t=xn):[t,n,o,i]=e,!t)return Dt;let a=Dt;const l=r.watch(()=>ft(t),u=>{a(),u&&(u.addEventListener(n,o,i),a=()=>{u.removeEventListener(n,o,i),a=Dt})},{immediate:!0,flush:"post"}),s=()=>{l(),a()};return Xe(s),s}const Ii=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):e?()=>!0:()=>!1;function Un(e,t,n={}){const{target:o=xn,eventName:i="keydown",passive:a=!1}=n,l=Ii(e);return re(o,i,u=>{l(u)&&t(u)},a)}function _n(e,t=null){const n=r.getCurrentInstance();let o=()=>{};const i=r.customRef((a,l)=>(o=l,{get(){var s,u;return a(),(u=(s=n==null?void 0:n.proxy)==null?void 0:s.$refs[e])!=null?u:t},set(){}}));return wn(o),r.onUpdated(o),i}function Ai(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),wn(o,t),n}const rn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},an="__vueuse_ssr_handlers__";rn[an]=rn[an]||{};rn[an];var Wn=Object.getOwnPropertySymbols,Vi=Object.prototype.hasOwnProperty,Di=Object.prototype.propertyIsEnumerable,Hi=(e,t)=>{var n={};for(var o in e)Vi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Wn)for(var o of Wn(e))t.indexOf(o)<0&&Di.call(e,o)&&(n[o]=e[o]);return n};function Bo(e,t,n={}){const o=n,{window:i=xn}=o,a=Hi(o,["window"]);let l;const s=Ai(()=>i&&"ResizeObserver"in i),u=()=>{l&&(l.disconnect(),l=void 0)},c=r.watch(()=>ft(e),v=>{u(),s.value&&i&&v&&(l=new ResizeObserver(t),l.observe(v,a))},{immediate:!0,flush:"post"}),d=()=>{u(),c()};return Xe(d),{isSupported:s,stop:d}}function Li(e,t={}){const{reset:n=!0,windowResize:o=!0,windowScroll:i=!0,immediate:a=!0}=t,l=r.ref(0),s=r.ref(0),u=r.ref(0),c=r.ref(0),d=r.ref(0),v=r.ref(0),f=r.ref(0),x=r.ref(0);function g(){const m=ft(e);if(!m){n&&(l.value=0,s.value=0,u.value=0,c.value=0,d.value=0,v.value=0,f.value=0,x.value=0);return}const h=m.getBoundingClientRect();l.value=h.height,s.value=h.bottom,u.value=h.left,c.value=h.right,d.value=h.top,v.value=h.width,f.value=h.x,x.value=h.y}return Bo(e,g),r.watch(()=>ft(e),m=>!m&&g()),i&&re("scroll",g,{passive:!0}),o&&re("resize",g,{passive:!0}),wn(()=>{a&&g()}),{height:l,bottom:s,left:u,right:c,top:d,width:v,x:f,y:x,update:g}}var Gn;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Gn||(Gn={}));var Fi=Object.defineProperty,Kn=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Ui=Object.prototype.propertyIsEnumerable,qn=(e,t,n)=>t in e?Fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wi=(e,t)=>{for(var n in t||(t={}))Zi.call(t,n)&&qn(e,n,t[n]);if(Kn)for(var n of Kn(t))Ui.call(t,n)&&qn(e,n,t[n]);return e};const Gi={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Wi({linear:Ei},Gi);function rt(e,t,n,o={}){var i,a,l;const{passive:s=!1,eventName:u,deep:c=!1,defaultValue:d}=o,v=r.getCurrentInstance(),f=n||(v==null?void 0:v.emit)||((i=v==null?void 0:v.$emit)==null?void 0:i.bind(v))||((l=(a=v==null?void 0:v.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(v==null?void 0:v.proxy));let x=u;t||(t="modelValue"),x=u||x||`update:${t.toString()}`;const g=()=>_i(e[t])?e[t]:d;if(s){const m=r.ref(g());return r.watch(()=>e[t],h=>m.value=h),r.watch(m,h=>{(h!==e[t]||c)&&f(x,h)},{deep:c}),m}else return r.computed({get(){return g()},set(m){f(x,m)}})}var Ki={value:()=>{}};function Et(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new at(n)}function at(e){this._=e}function qi(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}at.prototype=Et.prototype={constructor:at,on:function(e,t){var n=this._,o=qi(e+"",n),i,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((i=(e=o[a]).type)&&(i=Xi(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=o[a]).type)n[i]=Xn(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Xn(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new at(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Xi(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Xn(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Ki,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var ln="http://www.w3.org/1999/xhtml",Qn={svg:"http://www.w3.org/2000/svg",xhtml:ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function St(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qn.hasOwnProperty(t)?{space:Qn[t],local:e}:e}function Qi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ln&&t.documentElement.namespaceURI===ln?t.createElement(e):t.createElementNS(n,e)}}function ji(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ro(e){var t=St(e);return(t.local?ji:Qi)(t)}function Yi(){}function bn(e){return e==null?Yi:function(){return this.querySelector(e)}}function Ji(e){typeof e!="function"&&(e=bn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=new Array(l),u,c,d=0;d<l;++d)(u=a[d])&&(c=e.call(u,u.__data__,d,a))&&("__data__"in u&&(c.__data__=u.__data__),s[d]=c);return new ee(o,this._parents)}function er(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tr(){return[]}function zo(e){return e==null?tr:function(){return this.querySelectorAll(e)}}function nr(e){return function(){return er(e.apply(this,arguments))}}function or(e){typeof e=="function"?e=nr(e):e=zo(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var l=t[a],s=l.length,u,c=0;c<s;++c)(u=l[c])&&(o.push(e.call(u,u.__data__,c,l)),i.push(u));return new ee(o,i)}function Oo(e){return function(){return this.matches(e)}}function Po(e){return function(t){return t.matches(e)}}var ir=Array.prototype.find;function rr(e){return function(){return ir.call(this.children,e)}}function ar(){return this.firstElementChild}function lr(e){return this.select(e==null?ar:rr(typeof e=="function"?e:Po(e)))}var sr=Array.prototype.filter;function ur(){return Array.from(this.children)}function cr(e){return function(){return sr.call(this.children,e)}}function dr(e){return this.selectAll(e==null?ur:cr(typeof e=="function"?e:Po(e)))}function fr(e){typeof e!="function"&&(e=Oo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],u,c=0;c<l;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new ee(o,this._parents)}function To(e){return new Array(e.length)}function hr(){return new ee(this._enter||this._groups.map(To),this._parents)}function ht(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ht.prototype={constructor:ht,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vr(e){return function(){return e}}function mr(e,t,n,o,i,a){for(var l=0,s,u=t.length,c=a.length;l<c;++l)(s=t[l])?(s.__data__=a[l],o[l]=s):n[l]=new ht(e,a[l]);for(;l<u;++l)(s=t[l])&&(i[l]=s)}function gr(e,t,n,o,i,a,l){var s,u,c=new Map,d=t.length,v=a.length,f=new Array(d),x;for(s=0;s<d;++s)(u=t[s])&&(f[s]=x=l.call(u,u.__data__,s,t)+"",c.has(x)?i[s]=u:c.set(x,u));for(s=0;s<v;++s)x=l.call(e,a[s],s,a)+"",(u=c.get(x))?(o[s]=u,u.__data__=a[s],c.delete(x)):n[s]=new ht(e,a[s]);for(s=0;s<d;++s)(u=t[s])&&c.get(f[s])===u&&(i[s]=u)}function pr(e){return e.__data__}function yr(e,t){if(!arguments.length)return Array.from(this,pr);var n=t?gr:mr,o=this._parents,i=this._groups;typeof e!="function"&&(e=vr(e));for(var a=i.length,l=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var d=o[c],v=i[c],f=v.length,x=wr(e.call(d,d&&d.__data__,c,o)),g=x.length,m=s[c]=new Array(g),h=l[c]=new Array(g),_=u[c]=new Array(f);n(d,v,m,h,_,x,t);for(var R=0,C=0,y,$;R<g;++R)if(y=m[R]){for(R>=C&&(C=R+1);!($=h[C])&&++C<g;);y._next=$||null}}return l=new ee(l,o),l._enter=s,l._exit=u,l}function wr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xr(){return new ee(this._exit||this._groups.map(To),this._parents)}function _r(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function br(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,l=Math.min(i,a),s=new Array(i),u=0;u<l;++u)for(var c=n[u],d=o[u],v=c.length,f=s[u]=new Array(v),x,g=0;g<v;++g)(x=c[g]||d[g])&&(f[g]=x);for(;u<i;++u)s[u]=n[u];return new ee(s,this._parents)}function kr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],l;--i>=0;)(l=o[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Nr(e){e||(e=Er);function t(v,f){return v&&f?e(v.__data__,f.__data__):!v-!f}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var l=n[a],s=l.length,u=i[a]=new Array(s),c,d=0;d<s;++d)(c=l[d])&&(u[d]=c);u.sort(t)}return new ee(i,this._parents).order()}function Er(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Sr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Cr(){return Array.from(this)}function $r(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var l=o[i];if(l)return l}return null}function Mr(){let e=0;for(const t of this)++e;return e}function Br(){return!this.node()}function Rr(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,l=i.length,s;a<l;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function zr(e){return function(){this.removeAttribute(e)}}function Or(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pr(e,t){return function(){this.setAttribute(e,t)}}function Tr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ir(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ar(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vr(e,t){var n=St(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Or:zr:typeof t=="function"?n.local?Ar:Ir:n.local?Tr:Pr)(n,t))}function Io(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Dr(e){return function(){this.style.removeProperty(e)}}function Hr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Lr(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Fr(e,t,n){return arguments.length>1?this.each((t==null?Dr:typeof t=="function"?Lr:Hr)(e,t,n==null?"":n)):$e(this.node(),e)}function $e(e,t){return e.style.getPropertyValue(t)||Io(e).getComputedStyle(e,null).getPropertyValue(t)}function Zr(e){return function(){delete this[e]}}function Ur(e,t){return function(){this[e]=t}}function Wr(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Gr(e,t){return arguments.length>1?this.each((t==null?Zr:typeof t=="function"?Wr:Ur)(e,t)):this.node()[e]}function Ao(e){return e.trim().split(/^|\s+/)}function kn(e){return e.classList||new Vo(e)}function Vo(e){this._node=e,this._names=Ao(e.getAttribute("class")||"")}Vo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Do(e,t){for(var n=kn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ho(e,t){for(var n=kn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Kr(e){return function(){Do(this,e)}}function qr(e){return function(){Ho(this,e)}}function Xr(e,t){return function(){(t.apply(this,arguments)?Do:Ho)(this,e)}}function Qr(e,t){var n=Ao(e+"");if(arguments.length<2){for(var o=kn(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Xr:t?Kr:qr)(n,t))}function jr(){this.textContent=""}function Yr(e){return function(){this.textContent=e}}function Jr(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function ea(e){return arguments.length?this.each(e==null?jr:(typeof e=="function"?Jr:Yr)(e)):this.node().textContent}function ta(){this.innerHTML=""}function na(e){return function(){this.innerHTML=e}}function oa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function ia(e){return arguments.length?this.each(e==null?ta:(typeof e=="function"?oa:na)(e)):this.node().innerHTML}function ra(){this.nextSibling&&this.parentNode.appendChild(this)}function aa(){return this.each(ra)}function la(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sa(){return this.each(la)}function ua(e){var t=typeof e=="function"?e:Ro(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ca(){return null}function da(e,t){var n=typeof e=="function"?e:Ro(e),o=t==null?ca:typeof t=="function"?t:bn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function fa(){var e=this.parentNode;e&&e.removeChild(this)}function ha(){return this.each(fa)}function va(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ma(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ga(e){return this.select(e?ma:va)}function pa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ya(e){return function(t){e.call(this,t,this.__data__)}}function wa(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function xa(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function _a(e,t,n){return function(){var o=this.__on,i,a=ya(t);if(o){for(var l=0,s=o.length;l<s;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function ba(e,t,n){var o=wa(e+""),i,a=o.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,d;u<c;++u)for(i=0,d=s[u];i<a;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(s=t?_a:xa,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function Lo(e,t,n){var o=Io(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ka(e,t){return function(){return Lo(this,e,t)}}function Na(e,t){return function(){return Lo(this,e,t.apply(this,arguments))}}function Ea(e,t){return this.each((typeof t=="function"?Na:ka)(e,t))}function*Sa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,l;i<a;++i)(l=o[i])&&(yield l)}var Fo=[null];function ee(e,t){this._groups=e,this._parents=t}function Qe(){return new ee([[document.documentElement]],Fo)}function Ca(){return this}ee.prototype=Qe.prototype={constructor:ee,select:Ji,selectAll:or,selectChild:lr,selectChildren:dr,filter:fr,data:yr,enter:hr,exit:xr,join:_r,merge:br,selection:Ca,order:kr,sort:Nr,call:Sr,nodes:Cr,node:$r,size:Mr,empty:Br,each:Rr,attr:Vr,style:Fr,property:Gr,classed:Qr,text:ea,html:ia,raise:aa,lower:sa,append:ua,insert:da,remove:ha,clone:ga,datum:pa,on:ba,dispatch:Ea,[Symbol.iterator]:Sa};function te(e){return typeof e=="string"?new ee([[document.querySelector(e)]],[document.documentElement]):new ee([[e]],Fo)}function $a(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ie(e,t){if(e=$a(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ma={passive:!1},De={capture:!0,passive:!1};function Ht(e){e.stopImmediatePropagation()}function Se(e){e.preventDefault(),e.stopImmediatePropagation()}function Zo(e){var t=e.document.documentElement,n=te(e).on("dragstart.drag",Se,De);"onselectstart"in t?n.on("selectstart.drag",Se,De):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Uo(e,t){var n=e.document.documentElement,o=te(e).on("dragstart.drag",null);t&&(o.on("click.drag",Se,De),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Je=e=>()=>e;function sn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:l,y:s,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}sn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ba(e){return!e.ctrlKey&&!e.button}function Ra(){return this.parentNode}function za(e,t){return t==null?{x:e.x,y:e.y}:t}function Oa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pa(){var e=Ba,t=Ra,n=za,o=Oa,i={},a=Et("start","drag","end"),l=0,s,u,c,d,v=0;function f(y){y.on("mousedown.drag",x).filter(o).on("touchstart.drag",h).on("touchmove.drag",_,Ma).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(y,$){if(!(d||!e.call(this,y,$))){var N=C(this,t.call(this,y,$),y,$,"mouse");!N||(te(y.view).on("mousemove.drag",g,De).on("mouseup.drag",m,De),Zo(y.view),Ht(y),c=!1,s=y.clientX,u=y.clientY,N("start",y))}}function g(y){if(Se(y),!c){var $=y.clientX-s,N=y.clientY-u;c=$*$+N*N>v}i.mouse("drag",y)}function m(y){te(y.view).on("mousemove.drag mouseup.drag",null),Uo(y.view,c),Se(y),i.mouse("end",y)}function h(y,$){if(!!e.call(this,y,$)){var N=y.changedTouches,T=t.call(this,y,$),F=N.length,A,G;for(A=0;A<F;++A)(G=C(this,T,y,$,N[A].identifier,N[A]))&&(Ht(y),G("start",y,N[A]))}}function _(y){var $=y.changedTouches,N=$.length,T,F;for(T=0;T<N;++T)(F=i[$[T].identifier])&&(Se(y),F("drag",y,$[T]))}function R(y){var $=y.changedTouches,N=$.length,T,F;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),T=0;T<N;++T)(F=i[$[T].identifier])&&(Ht(y),F("end",y,$[T]))}function C(y,$,N,T,F,A){var G=a.copy(),L=ie(A||N,$),W,I,w;if((w=n.call(y,new sn("beforestart",{sourceEvent:N,target:f,identifier:F,active:l,x:L[0],y:L[1],dx:0,dy:0,dispatch:G}),T))!=null)return W=w.x-L[0]||0,I=w.y-L[1]||0,function z(k,O,b){var M=L,p;switch(k){case"start":i[F]=z,p=l++;break;case"end":delete i[F],--l;case"drag":L=ie(b||O,$),p=l;break}G.call(k,y,new sn(k,{sourceEvent:O,subject:w,target:f,identifier:F,active:p,x:L[0]+W,y:L[1]+I,dx:L[0]-M[0],dy:L[1]-M[1],dispatch:G}),T)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Je(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:Je(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Je(y),f):n},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:Je(!!y),f):o},f.on=function(){var y=a.on.apply(a,arguments);return y===a?f:y},f.clickDistance=function(y){return arguments.length?(v=(y=+y)*y,f):Math.sqrt(v)},f}function Nn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wo(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function je(){}var He=.7,vt=1/He,Ce="\\s*([+-]?\\d+)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ta=/^#([0-9a-f]{3,8})$/,Ia=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Aa=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Va=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${Le}\\)$`),Da=new RegExp(`^rgba\\(${ae},${ae},${ae},${Le}\\)$`),Ha=new RegExp(`^hsl\\(${Le},${ae},${ae}\\)$`),La=new RegExp(`^hsla\\(${Le},${ae},${ae},${Le}\\)$`),jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nn(je,Fe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yn,formatHex:Yn,formatHex8:Fa,formatHsl:Za,formatRgb:Jn,toString:Jn});function Yn(){return this.rgb().formatHex()}function Fa(){return this.rgb().formatHex8()}function Za(){return Go(this).formatHsl()}function Jn(){return this.rgb().formatRgb()}function Fe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ta.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eo(t):n===3?new J(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?et(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?et(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ia.exec(e))?new J(t[1],t[2],t[3],1):(t=Aa.exec(e))?new J(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Va.exec(e))?et(t[1],t[2],t[3],t[4]):(t=Da.exec(e))?et(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ha.exec(e))?oo(t[1],t[2]/100,t[3]/100,1):(t=La.exec(e))?oo(t[1],t[2]/100,t[3]/100,t[4]):jn.hasOwnProperty(e)?eo(jn[e]):e==="transparent"?new J(NaN,NaN,NaN,0):null}function eo(e){return new J(e>>16&255,e>>8&255,e&255,1)}function et(e,t,n,o){return o<=0&&(e=t=n=NaN),new J(e,t,n,o)}function Ua(e){return e instanceof je||(e=Fe(e)),e?(e=e.rgb(),new J(e.r,e.g,e.b,e.opacity)):new J}function un(e,t,n,o){return arguments.length===1?Ua(e):new J(e,t,n,o==null?1:o)}function J(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Nn(J,un,Wo(je,{brighter(e){return e=e==null?vt:Math.pow(vt,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?He:Math.pow(He,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new J(ye(this.r),ye(this.g),ye(this.b),mt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:to,formatHex:to,formatHex8:Wa,formatRgb:no,toString:no}));function to(){return`#${ge(this.r)}${ge(this.g)}${ge(this.b)}`}function Wa(){return`#${ge(this.r)}${ge(this.g)}${ge(this.b)}${ge((isNaN(this.opacity)?1:this.opacity)*255)}`}function no(){const e=mt(this.opacity);return`${e===1?"rgb(":"rgba("}${ye(this.r)}, ${ye(this.g)}, ${ye(this.b)}${e===1?")":`, ${e})`}`}function mt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ye(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ge(e){return e=ye(e),(e<16?"0":"")+e.toString(16)}function oo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ne(e,t,n,o)}function Go(e){if(e instanceof ne)return new ne(e.h,e.s,e.l,e.opacity);if(e instanceof je||(e=Fe(e)),!e)return new ne;if(e instanceof ne)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,s=a-i,u=(a+i)/2;return s?(t===a?l=(n-o)/s+(n<o)*6:n===a?l=(o-t)/s+2:l=(t-n)/s+4,s/=u<.5?a+i:2-a-i,l*=60):s=u>0&&u<1?0:l,new ne(l,s,u,e.opacity)}function Ga(e,t,n,o){return arguments.length===1?Go(e):new ne(e,t,n,o==null?1:o)}function ne(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Nn(ne,Ga,Wo(je,{brighter(e){return e=e==null?vt:Math.pow(vt,e),new ne(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?He:Math.pow(He,e),new ne(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new J(Lt(e>=240?e-240:e+120,i,o),Lt(e,i,o),Lt(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ne(io(this.h),tt(this.s),tt(this.l),mt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mt(this.opacity);return`${e===1?"hsl(":"hsla("}${io(this.h)}, ${tt(this.s)*100}%, ${tt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function io(e){return e=(e||0)%360,e<0?e+360:e}function tt(e){return Math.max(0,Math.min(1,e||0))}function Lt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Ko=e=>()=>e;function Ka(e,t){return function(n){return e+n*t}}function qa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Xa(e){return(e=+e)==1?qo:function(t,n){return n-t?qa(t,n,e):Ko(isNaN(t)?n:t)}}function qo(e,t){var n=t-e;return n?Ka(e,n):Ko(isNaN(e)?t:e)}var ro=function e(t){var n=Xa(t);function o(i,a){var l=n((i=un(i)).r,(a=un(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),c=qo(i.opacity,a.opacity);return function(d){return i.r=l(d),i.g=s(d),i.b=u(d),i.opacity=c(d),i+""}}return o.gamma=e,o}(1);function fe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ft=new RegExp(cn.source,"g");function Qa(e){return function(){return e}}function ja(e){return function(t){return e(t)+""}}function Ya(e,t){var n=cn.lastIndex=Ft.lastIndex=0,o,i,a,l=-1,s=[],u=[];for(e=e+"",t=t+"";(o=cn.exec(e))&&(i=Ft.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[l]?s[l]+=a:s[++l]=a),(o=o[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,u.push({i:l,x:fe(o,i)})),n=Ft.lastIndex;return n<t.length&&(a=t.slice(n),s[l]?s[l]+=a:s[++l]=a),s.length<2?u[0]?ja(u[0].x):Qa(t):(t=u.length,function(c){for(var d=0,v;d<t;++d)s[(v=u[d]).i]=v.x(c);return s.join("")})}var ao=180/Math.PI,dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xo(e,t,n,o,i,a){var l,s,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,u/=s),e*o<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ao,skewX:Math.atan(u)*ao,scaleX:l,scaleY:s}}var nt;function Ja(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dn:Xo(t.a,t.b,t.c,t.d,t.e,t.f)}function el(e){return e==null||(nt||(nt=document.createElementNS("http://www.w3.org/2000/svg","g")),nt.setAttribute("transform",e),!(e=nt.transform.baseVal.consolidate()))?dn:(e=e.matrix,Xo(e.a,e.b,e.c,e.d,e.e,e.f))}function Qo(e,t,n,o){function i(c){return c.length?c.pop()+" ":""}function a(c,d,v,f,x,g){if(c!==v||d!==f){var m=x.push("translate(",null,t,null,n);g.push({i:m-4,x:fe(c,v)},{i:m-2,x:fe(d,f)})}else(v||f)&&x.push("translate("+v+t+f+n)}function l(c,d,v,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:v.push(i(v)+"rotate(",null,o)-2,x:fe(c,d)})):d&&v.push(i(v)+"rotate("+d+o)}function s(c,d,v,f){c!==d?f.push({i:v.push(i(v)+"skewX(",null,o)-2,x:fe(c,d)}):d&&v.push(i(v)+"skewX("+d+o)}function u(c,d,v,f,x,g){if(c!==v||d!==f){var m=x.push(i(x)+"scale(",null,",",null,")");g.push({i:m-4,x:fe(c,v)},{i:m-2,x:fe(d,f)})}else(v!==1||f!==1)&&x.push(i(x)+"scale("+v+","+f+")")}return function(c,d){var v=[],f=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,v,f),l(c.rotate,d.rotate,v,f),s(c.skewX,d.skewX,v,f),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,v,f),c=d=null,function(x){for(var g=-1,m=f.length,h;++g<m;)v[(h=f[g]).i]=h.x(x);return v.join("")}}}var tl=Qo(Ja,"px, ","px)","deg)"),nl=Qo(el,", ",")",")"),ol=1e-12;function lo(e){return((e=Math.exp(e))+1/e)/2}function il(e){return((e=Math.exp(e))-1/e)/2}function rl(e){return((e=Math.exp(2*e))-1)/(e+1)}var al=function e(t,n,o){function i(a,l){var s=a[0],u=a[1],c=a[2],d=l[0],v=l[1],f=l[2],x=d-s,g=v-u,m=x*x+g*g,h,_;if(m<ol)_=Math.log(f/c)/t,h=function(T){return[s+T*x,u+T*g,c*Math.exp(t*T*_)]};else{var R=Math.sqrt(m),C=(f*f-c*c+o*m)/(2*c*n*R),y=(f*f-c*c-o*m)/(2*f*n*R),$=Math.log(Math.sqrt(C*C+1)-C),N=Math.log(Math.sqrt(y*y+1)-y);_=(N-$)/t,h=function(T){var F=T*_,A=lo($),G=c/(n*R)*(A*rl(t*F+$)-il($));return[s+G*x,u+G*g,c*A/lo(t*F+$)]}}return h.duration=_*1e3*t/Math.SQRT2,h}return i.rho=function(a){var l=Math.max(.001,+a),s=l*l,u=s*s;return e(l,s,u)},i}(Math.SQRT2,2,4),Me=0,Pe=0,ze=0,jo=1e3,gt,Te,pt=0,xe=0,Ct=0,Ze=typeof performance=="object"&&performance.now?performance:Date,Yo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function En(){return xe||(Yo(ll),xe=Ze.now()+Ct)}function ll(){xe=0}function yt(){this._call=this._time=this._next=null}yt.prototype=Jo.prototype={constructor:yt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?En():+n)+(t==null?0:+t),!this._next&&Te!==this&&(Te?Te._next=this:gt=this,Te=this),this._call=e,this._time=n,fn()},stop:function(){this._call&&(this._call=null,this._time=1/0,fn())}};function Jo(e,t,n){var o=new yt;return o.restart(e,t,n),o}function sl(){En(),++Me;for(var e=gt,t;e;)(t=xe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Me}function so(){xe=(pt=Ze.now())+Ct,Me=Pe=0;try{sl()}finally{Me=0,cl(),xe=0}}function ul(){var e=Ze.now(),t=e-pt;t>jo&&(Ct-=t,pt=e)}function cl(){for(var e,t=gt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gt=n);Te=e,fn(o)}function fn(e){if(!Me){Pe&&(Pe=clearTimeout(Pe));var t=e-xe;t>24?(e<1/0&&(Pe=setTimeout(so,e-Ze.now()-Ct)),ze&&(ze=clearInterval(ze))):(ze||(pt=Ze.now(),ze=setInterval(ul,jo)),Me=1,Yo(so))}}function uo(e,t,n){var o=new yt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var dl=Et("start","end","cancel","interrupt"),fl=[],ei=0,co=1,hn=2,lt=3,fo=4,vn=5,st=6;function $t(e,t,n,o,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;hl(e,n,{name:t,index:o,group:i,on:dl,tween:fl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ei})}function Sn(e,t){var n=oe(e,t);if(n.state>ei)throw new Error("too late; already scheduled");return n}function se(e,t){var n=oe(e,t);if(n.state>lt)throw new Error("too late; already running");return n}function oe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hl(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Jo(a,0,n.time);function a(c){n.state=co,n.timer.restart(l,n.delay,n.time),n.delay<=c&&l(c-n.delay)}function l(c){var d,v,f,x;if(n.state!==co)return u();for(d in o)if(x=o[d],x.name===n.name){if(x.state===lt)return uo(l);x.state===fo?(x.state=st,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[d]):+d<t&&(x.state=st,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[d])}if(uo(function(){n.state===lt&&(n.state=fo,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=hn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hn){for(n.state=lt,i=new Array(f=n.tween.length),d=0,v=-1;d<f;++d)(x=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++v]=x);i.length=v+1}}function s(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=vn,1),v=-1,f=i.length;++v<f;)i[v].call(e,d);n.state===vn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=st,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function ut(e,t){var n=e.__transition,o,i,a=!0,l;if(!!n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}i=o.state>hn&&o.state<vn,o.state=st,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function vl(e){return this.each(function(){ut(this,e)})}function ml(e,t){var n,o;return function(){var i=se(this,e),a=i.tween;if(a!==n){o=n=a;for(var l=0,s=o.length;l<s;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function gl(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=se(this,e),l=a.tween;if(l!==o){i=(o=l).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}a.tween=i}}function pl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=oe(this.node(),n).tween,i=0,a=o.length,l;i<a;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?ml:gl)(n,e,t))}function Cn(e,t,n){var o=e._id;return e.each(function(){var i=se(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return oe(i,o).value[t]}}function ti(e,t){var n;return(typeof t=="number"?fe:t instanceof Fe?ro:(n=Fe(t))?(t=n,ro):Ya)(e,t)}function yl(e){return function(){this.removeAttribute(e)}}function wl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xl(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===o?a:a=t(o=l,n)}}function _l(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?a:a=t(o=l,n)}}function bl(e,t,n){var o,i,a;return function(){var l,s=n(this),u;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=s+"",l===u?null:l===o&&u===i?a:(i=u,a=t(o=l,s)))}}function kl(e,t,n){var o,i,a;return function(){var l,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=s+"",l===u?null:l===o&&u===i?a:(i=u,a=t(o=l,s)))}}function Nl(e,t){var n=St(e),o=n==="transform"?nl:ti;return this.attrTween(e,typeof t=="function"?(n.local?kl:bl)(n,o,Cn(this,"attr."+e,t)):t==null?(n.local?wl:yl)(n):(n.local?_l:xl)(n,o,t))}function El(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Sl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Cl(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Sl(e,a)),n}return i._value=t,i}function $l(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&El(e,a)),n}return i._value=t,i}function Ml(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=St(e);return this.tween(n,(o.local?Cl:$l)(o,t))}function Bl(e,t){return function(){Sn(this,e).delay=+t.apply(this,arguments)}}function Rl(e,t){return t=+t,function(){Sn(this,e).delay=t}}function zl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bl:Rl)(t,e)):oe(this.node(),t).delay}function Ol(e,t){return function(){se(this,e).duration=+t.apply(this,arguments)}}function Pl(e,t){return t=+t,function(){se(this,e).duration=t}}function Tl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ol:Pl)(t,e)):oe(this.node(),t).duration}function Il(e,t){if(typeof t!="function")throw new Error;return function(){se(this,e).ease=t}}function Al(e){var t=this._id;return arguments.length?this.each(Il(t,e)):oe(this.node(),t).ease}function Vl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;se(this,e).ease=n}}function Dl(e){if(typeof e!="function")throw new Error;return this.each(Vl(this._id,e))}function Hl(e){typeof e!="function"&&(e=Oo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],u,c=0;c<l;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new de(o,this._parents,this._name,this._id)}function Ll(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),l=new Array(o),s=0;s<a;++s)for(var u=t[s],c=n[s],d=u.length,v=l[s]=new Array(d),f,x=0;x<d;++x)(f=u[x]||c[x])&&(v[x]=f);for(;s<o;++s)l[s]=t[s];return new de(l,this._parents,this._name,this._id)}function Fl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Zl(e,t,n){var o,i,a=Fl(t)?Sn:se;return function(){var l=a(this,e),s=l.on;s!==o&&(i=(o=s).copy()).on(t,n),l.on=i}}function Ul(e,t){var n=this._id;return arguments.length<2?oe(this.node(),n).on.on(e):this.each(Zl(n,e,t))}function Wl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Gl(){return this.on("end.remove",Wl(this._id))}function Kl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bn(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var s=o[l],u=s.length,c=a[l]=new Array(u),d,v,f=0;f<u;++f)(d=s[f])&&(v=e.call(d,d.__data__,f,s))&&("__data__"in d&&(v.__data__=d.__data__),c[f]=v,$t(c[f],t,n,f,c,oe(d,n)));return new de(a,this._parents,t,n)}function ql(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zo(e));for(var o=this._groups,i=o.length,a=[],l=[],s=0;s<i;++s)for(var u=o[s],c=u.length,d,v=0;v<c;++v)if(d=u[v]){for(var f=e.call(d,d.__data__,v,u),x,g=oe(d,n),m=0,h=f.length;m<h;++m)(x=f[m])&&$t(x,t,n,m,f,g);a.push(f),l.push(d)}return new de(a,l,t,n)}var Xl=Qe.prototype.constructor;function Ql(){return new Xl(this._groups,this._parents)}function jl(e,t){var n,o,i;return function(){var a=$e(this,e),l=(this.style.removeProperty(e),$e(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}function ni(e){return function(){this.style.removeProperty(e)}}function Yl(e,t,n){var o,i=n+"",a;return function(){var l=$e(this,e);return l===i?null:l===o?a:a=t(o=l,n)}}function Jl(e,t,n){var o,i,a;return function(){var l=$e(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),$e(this,e))),l===u?null:l===o&&u===i?a:(i=u,a=t(o=l,s))}}function es(e,t){var n,o,i,a="style."+t,l="end."+a,s;return function(){var u=se(this,e),c=u.on,d=u.value[a]==null?s||(s=ni(t)):void 0;(c!==n||i!==d)&&(o=(n=c).copy()).on(l,i=d),u.on=o}}function ts(e,t,n){var o=(e+="")=="transform"?tl:ti;return t==null?this.styleTween(e,jl(e,o)).on("end.style."+e,ni(e)):typeof t=="function"?this.styleTween(e,Jl(e,o,Cn(this,"style."+e,t))).each(es(this._id,e)):this.styleTween(e,Yl(e,o,t),n).on("end.style."+e,null)}function ns(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function os(e,t,n){var o,i;function a(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&ns(e,l,n)),o}return a._value=t,a}function is(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,os(e,t,n==null?"":n))}function rs(e){return function(){this.textContent=e}}function as(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function ls(e){return this.tween("text",typeof e=="function"?as(Cn(this,"text",e)):rs(e==null?"":e+""))}function ss(e){return function(t){this.textContent=e.call(this,t)}}function us(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ss(i)),t}return o._value=e,o}function cs(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,us(e))}function ds(){for(var e=this._name,t=this._id,n=oi(),o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,u,c=0;c<s;++c)if(u=l[c]){var d=oe(u,t);$t(u,e,n,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new de(o,this._parents,e,n)}function fs(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,l){var s={value:l},u={value:function(){--i===0&&a()}};n.each(function(){var c=se(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&a()})}var hs=0;function de(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function oi(){return++hs}var ue=Qe.prototype;de.prototype={constructor:de,select:Kl,selectAll:ql,selectChild:ue.selectChild,selectChildren:ue.selectChildren,filter:Hl,merge:Ll,selection:Ql,transition:ds,call:ue.call,nodes:ue.nodes,node:ue.node,size:ue.size,empty:ue.empty,each:ue.each,on:Ul,attr:Nl,attrTween:Ml,style:ts,styleTween:is,text:ls,textTween:cs,remove:Gl,tween:pl,delay:zl,duration:Tl,ease:Al,easeVarying:Dl,end:fs,[Symbol.iterator]:ue[Symbol.iterator]};function vs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ms={time:null,delay:0,duration:250,ease:vs};function gs(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ps(e){var t,n;e instanceof de?(t=e._id,e=e._name):(t=oi(),(n=ms).time=En(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,u,c=0;c<s;++c)(u=l[c])&&$t(u,e,t,c,l,n||gs(u,t));return new de(o,this._parents,e,t)}Qe.prototype.interrupt=vl;Qe.prototype.transition=ps;var ot=e=>()=>e;function ys(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function ce(e,t,n){this.k=e,this.x=t,this.y=n}ce.prototype={constructor:ce,scale:function(e){return e===1?this:new ce(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ce(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mt=new ce(1,0,0);ce.prototype;function Zt(e){e.stopImmediatePropagation()}function Oe(e){e.preventDefault(),e.stopImmediatePropagation()}function ws(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function xs(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ho(){return this.__zoom||Mt}function _s(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function bs(){return navigator.maxTouchPoints||"ontouchstart"in this}function ks(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function Ns(){var e=ws,t=xs,n=ks,o=_s,i=bs,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,u=al,c=Et("start","zoom","end"),d,v,f,x=500,g=150,m=0,h=10;function _(w){w.property("__zoom",ho).on("wheel.zoom",F,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(w,z,k,O){var b=w.selection?w.selection():w;b.property("__zoom",ho),w!==b?$(w,z,k,O):b.interrupt().each(function(){N(this,arguments).event(O).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},_.scaleBy=function(w,z,k,O){_.scaleTo(w,function(){var b=this.__zoom.k,M=typeof z=="function"?z.apply(this,arguments):z;return b*M},k,O)},_.scaleTo=function(w,z,k,O){_.transform(w,function(){var b=t.apply(this,arguments),M=this.__zoom,p=k==null?y(b):typeof k=="function"?k.apply(this,arguments):k,E=M.invert(p),V=typeof z=="function"?z.apply(this,arguments):z;return n(C(R(M,V),p,E),b,l)},k,O)},_.translateBy=function(w,z,k,O){_.transform(w,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),l)},null,O)},_.translateTo=function(w,z,k,O,b){_.transform(w,function(){var M=t.apply(this,arguments),p=this.__zoom,E=O==null?y(M):typeof O=="function"?O.apply(this,arguments):O;return n(Mt.translate(E[0],E[1]).scale(p.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof k=="function"?-k.apply(this,arguments):-k),M,l)},O,b)};function R(w,z){return z=Math.max(a[0],Math.min(a[1],z)),z===w.k?w:new ce(z,w.x,w.y)}function C(w,z,k){var O=z[0]-k[0]*w.k,b=z[1]-k[1]*w.k;return O===w.x&&b===w.y?w:new ce(w.k,O,b)}function y(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function $(w,z,k,O){w.on("start.zoom",function(){N(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(O).end()}).tween("zoom",function(){var b=this,M=arguments,p=N(b,M).event(O),E=t.apply(b,M),V=k==null?y(E):typeof k=="function"?k.apply(b,M):k,D=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),B=b.__zoom,S=typeof z=="function"?z.apply(b,M):z,P=u(B.invert(V).concat(D/B.k),S.invert(V).concat(D/S.k));return function(K){if(K===1)K=S;else{var H=P(K),q=D/H[2];K=new ce(q,V[0]-H[0]*q,V[1]-H[1]*q)}p.zoom(null,K)}})}function N(w,z,k){return!k&&w.__zooming||new T(w,z)}function T(w,z){this.that=w,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,z),this.taps=0}T.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,z){return this.mouse&&w!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var z=te(this.that).datum();c.call(w,this.that,new ys(w,{sourceEvent:this.sourceEvent,target:_,type:w,transform:this.that.__zoom,dispatch:c}),z)}};function F(w,...z){if(!e.apply(this,arguments))return;var k=N(this,z).event(w),O=this.__zoom,b=Math.max(a[0],Math.min(a[1],O.k*Math.pow(2,o.apply(this,arguments)))),M=ie(w);if(k.wheel)(k.mouse[0][0]!==M[0]||k.mouse[0][1]!==M[1])&&(k.mouse[1]=O.invert(k.mouse[0]=M)),clearTimeout(k.wheel);else{if(O.k===b)return;k.mouse=[M,O.invert(M)],ut(this),k.start()}Oe(w),k.wheel=setTimeout(p,g),k.zoom("mouse",n(C(R(O,b),k.mouse[0],k.mouse[1]),k.extent,l));function p(){k.wheel=null,k.end()}}function A(w,...z){if(f||!e.apply(this,arguments))return;var k=w.currentTarget,O=N(this,z,!0).event(w),b=te(w.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",D,!0),M=ie(w,k),p=w.clientX,E=w.clientY;Zo(w.view),Zt(w),O.mouse=[M,this.__zoom.invert(M)],ut(this),O.start();function V(B){if(Oe(B),!O.moved){var S=B.clientX-p,P=B.clientY-E;O.moved=S*S+P*P>m}O.event(B).zoom("mouse",n(C(O.that.__zoom,O.mouse[0]=ie(B,k),O.mouse[1]),O.extent,l))}function D(B){b.on("mousemove.zoom mouseup.zoom",null),Uo(B.view,O.moved),Oe(B),O.event(B).end()}}function G(w,...z){if(!!e.apply(this,arguments)){var k=this.__zoom,O=ie(w.changedTouches?w.changedTouches[0]:w,this),b=k.invert(O),M=k.k*(w.shiftKey?.5:2),p=n(C(R(k,M),O,b),t.apply(this,z),l);Oe(w),s>0?te(this).transition().duration(s).call($,p,O,w):te(this).call(_.transform,p,O,w)}}function L(w,...z){if(!!e.apply(this,arguments)){var k=w.touches,O=k.length,b=N(this,z,w.changedTouches.length===O).event(w),M,p,E,V;for(Zt(w),p=0;p<O;++p)E=k[p],V=ie(E,this),V=[V,this.__zoom.invert(V),E.identifier],b.touch0?!b.touch1&&b.touch0[2]!==V[2]&&(b.touch1=V,b.taps=0):(b.touch0=V,M=!0,b.taps=1+!!d);d&&(d=clearTimeout(d)),M&&(b.taps<2&&(v=V[0],d=setTimeout(function(){d=null},x)),ut(this),b.start())}}function W(w,...z){if(!!this.__zooming){var k=N(this,z).event(w),O=w.changedTouches,b=O.length,M,p,E,V;for(Oe(w),M=0;M<b;++M)p=O[M],E=ie(p,this),k.touch0&&k.touch0[2]===p.identifier?k.touch0[0]=E:k.touch1&&k.touch1[2]===p.identifier&&(k.touch1[0]=E);if(p=k.that.__zoom,k.touch1){var D=k.touch0[0],B=k.touch0[1],S=k.touch1[0],P=k.touch1[1],K=(K=S[0]-D[0])*K+(K=S[1]-D[1])*K,H=(H=P[0]-B[0])*H+(H=P[1]-B[1])*H;p=R(p,Math.sqrt(K/H)),E=[(D[0]+S[0])/2,(D[1]+S[1])/2],V=[(B[0]+P[0])/2,(B[1]+P[1])/2]}else if(k.touch0)E=k.touch0[0],V=k.touch0[1];else return;k.zoom("touch",n(C(p,E,V),k.extent,l))}}function I(w,...z){if(!!this.__zooming){var k=N(this,z).event(w),O=w.changedTouches,b=O.length,M,p;for(Zt(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},x),M=0;M<b;++M)p=O[M],k.touch0&&k.touch0[2]===p.identifier?delete k.touch0:k.touch1&&k.touch1[2]===p.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(p=ie(p,this),Math.hypot(v[0]-p[0],v[1]-p[1])<h)){var E=te(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return _.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:ot(+w),_):o},_.filter=function(w){return arguments.length?(e=typeof w=="function"?w:ot(!!w),_):e},_.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:ot(!!w),_):i},_.extent=function(w){return arguments.length?(t=typeof w=="function"?w:ot([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),_):t},_.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],_):[a[0],a[1]]},_.translateExtent=function(w){return arguments.length?(l[0][0]=+w[0][0],l[1][0]=+w[1][0],l[0][1]=+w[0][1],l[1][1]=+w[1][1],_):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},_.constrain=function(w){return arguments.length?(n=w,_):n},_.duration=function(w){return arguments.length?(s=+w,_):s},_.interpolate=function(w){return arguments.length?(u=w,_):u},_.on=function(){var w=c.on.apply(c,arguments);return w===c?_:w},_.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,_):Math.sqrt(m)},_.tapDistance=function(w){return arguments.length?(h=+w,_):h},_}var U=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(U||{}),ii=(e=>(e.Lines="lines",e.Dots="dots",e))(ii||{}),we=(e=>(e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(we||{}),_e=(e=>(e.Strict="strict",e.Loose="loose",e))(_e||{}),ri=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(ri||{}),Ue=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Ue||{});const mn=Symbol("vueFlow"),$n=Symbol("nodeId"),Bt=Symbol("slots"),Es=()=>({edgesChange:Z(),nodesChange:Z(),nodeDoubleClick:Z(),nodeClick:Z(),nodeMouseEnter:Z(),nodeMouseMove:Z(),nodeMouseLeave:Z(),nodeContextMenu:Z(),nodeDragStart:Z(),nodeDrag:Z(),nodeDragStop:Z(),miniMapNodeClick:Z(),miniMapNodeDoubleClick:Z(),miniMapNodeMouseEnter:Z(),miniMapNodeMouseMove:Z(),miniMapNodeMouseLeave:Z(),connect:Z(),connectStart:Z(),connectStop:Z(),connectEnd:Z(),paneReady:Z(),move:Z(),moveStart:Z(),moveEnd:Z(),selectionDragStart:Z(),selectionDrag:Z(),selectionDragStop:Z(),selectionContextMenu:Z(),paneScroll:Z(),paneClick:Z(),paneContextMenu:Z(),paneMouseEnter:Z(),paneMouseMove:Z(),paneMouseLeave:Z(),edgeContextMenu:Z(),edgeMouseEnter:Z(),edgeMouseMove:Z(),edgeMouseLeave:Z(),edgeDoubleClick:Z(),edgeClick:Z(),edgeUpdateStart:Z(),edgeUpdate:Z(),edgeUpdateEnd:Z(),updateNodeInternals:Z()});var Ss=(e,t)=>{r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),Xe(()=>{o.off(i)})}})};const Cs=["data-handleid","data-nodeid","data-handlepos"],$s={name:"Handle"},We=r.defineComponent({...$s,props:{id:null,type:{default:"source"},position:{default:()=>"top"},isValidConnection:{type:Function,default:()=>function(){return!0}},connectable:{type:Boolean,default:!0}},setup(e){const t=X(),n=r.toRef(t,"connectionStartHandle"),o=r.toRef(t,"connectionMode"),i=r.inject($n,""),a=r.computed(()=>{var v;return(v=e.id)!=null?v:o.value===_e.Strict?null:`${i}__handle-${e.position}`}),{onMouseDown:l,onClick:s}=Dn(),u=v=>{l(v,a.value,i,e.type==="target",e.isValidConnection,void 0)},c=v=>{var f;s(v,(f=a.value)!=null?f:null,i,e.type,e.isValidConnection)},d=r.computed(()=>["vue-flow__handle",`vue-flow__handle-${e.position}`,`vue-flow__handle-${a.value}`,"nodrag",{source:e.type!=="target",target:e.type==="target",connectable:e.connectable,connecting:n.value&&n.value.nodeId===i&&n.value.handleId===a.value&&n.value.type===e.type}]);return(v,f)=>(r.openBlock(),r.createElementBlock("div",{"data-handleid":a.value,"data-nodeid":r.unref(i),"data-handlepos":e.position,class:r.normalizeClass(r.unref(d)),onMousedown:u,onClick:c},[r.renderSlot(v.$slots,"default",{id:e.id})],42,Cs))}}),Mn=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,connectable:o=!1,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(We,{type:"target",position:t,isConnectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(We,{type:"source",position:e,isConnectable:o,isValidConnection:a})]};Mn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Mn.inheritAttrs=!1;const Bn=function({sourcePosition:e=U.Bottom,label:t,connectable:n=!1,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(We,{type:"source",position:e,isConnectable:n,isValidConnection:o})]};Bn.props=["sourcePosition","label","isValidSourcePos","connectable"];Bn.inheritAttrs=!1;const Rn=function({targetPosition:e=U.Top,label:t,connectable:n=!1,isValidTargetPos:o}){return[r.h(We,{type:"target",position:e,isConnectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};Rn.props=["targetPosition","label","isValidTargetPos","connectable"];Rn.inheritAttrs=!1;const zn=e=>({width:e.offsetWidth,height:e.offsetHeight}),wt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ge=(e,t)=>({x:wt(e.x,t[0][0],t[1][0]),y:wt(e.y,t[0][1],t[1][1])}),vo=e=>{const t=e.getRootNode(),n=Re();return"getElementFromPoint"in t?t:n.document},le=e=>"id"in e&&"source"in e&&"target"in e,Ke=e=>le(e)&&"sourceNode"in e&&"targetNode"in e,Rt=e=>"id"in e&&!le(e),he=e=>Rt(e)&&"computedPosition"in e,Ms=(e,t,n)=>{var i;let o=n;return he(e)||(o={type:(i=e.type)!=null?i:"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,...n}),{...o,...e,id:e.id.toString()}},On=(e,t)=>(t=Ke(e)?t:{sourceHandle:e.sourceHandle?e.sourceHandle.toString():void 0,targetHandle:e.targetHandle?e.targetHandle.toString():void 0,type:e.type,source:e.source.toString(),target:e.target.toString(),z:0,sourceX:0,sourceY:0,targetX:0,targetY:0,updatable:e.updatable,selectable:e.selectable,data:e.data,...t},Object.assign({id:e.id.toString()},e,t)),ai=(e,t,n)=>{if(!Rt(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>le(a)&&a[o]===e.id).map(a=>le(a)&&a[n]);return t.filter(a=>i.includes(a.id))},Bs=(e,t)=>ai(e,t,"target"),Rs=(e,t)=>ai(e,t,"source"),zt=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${t!=null?t:""}-${n}${o!=null?o:""}`,Pn=(e,t)=>t.some(n=>le(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),zs=(e,t,n)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),t;let o;return le(e)?o={...e}:o={...e,id:zt(e)},o=On(o,n),Pn(o,t)||t.push(o),t},Os=(e,t,n)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>le(a)&&a.id===e.id);if(!o)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),n;const i={...e,id:zt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)},Tn=({x:e,y:t},{x:n,y:o,zoom:i},a,[l,s])=>{const u={x:(e-n)/i,y:(t-o)/i};return a?{x:l*Math.round(u.x/l),y:s*Math.round(u.y/s)}:u},li=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Be=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),si=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Ps=(e,t)=>si(li(Be(e),Be(t))),Ot=e=>{const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>li(n,Be({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return si(t)},Ts=({x:e,y:t},{x:n,y:o,zoom:i})=>({x:e*i+n,y:t*i+o}),In=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1)=>{const l=Be({x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter(s=>{if(!s||s.selectable===!1)return!1;const{computedPosition:u={x:0,y:0},dimensions:c={width:0,height:0}}=s,d=Be({...u,...c}),v=Math.max(0,Math.min(l.x2,d.x2)-Math.max(l.x,d.x)),f=Math.max(0,Math.min(l.y2,d.y2)-Math.max(l.y,d.y)),x=Math.ceil(v*f),g=typeof c.width=="undefined"||typeof c.height=="undefined"||c.width===0||c.height===0,m=a&&x>0,h=c.width*c.height;return g||m||x>=h})},Y=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},gn=(e,t,n,o,i,a=.1,l={x:0,y:0})=>{var m,h;const s=t/(e.width*(1+a)),u=n/(e.height*(1+a)),c=Math.min(s,u),d=wt(c,o,i),v=e.x+e.width/2,f=e.y+e.height/2,x=t/2-v*d+((m=l.x)!=null?m:0),g=n/2-f*d+((h=l.y)!=null?h:0);return{x,y:g,zoom:d}},Is=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:e.z>t.z?e.z:t.z}),ui=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:ui(n,t):!1},ve=e=>typeof e=="undefined"?"":typeof e=="string"?e:Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&"),mo=(e,t,n)=>{var s,u,c,d;const o=((s=n==null?void 0:n.x)!=null?s:0)+t.x,i=((u=n==null?void 0:n.y)!=null?u:0)+t.y,a=(c=n==null?void 0:n.width)!=null?c:t.width,l=(d=n==null?void 0:n.height)!=null?d:t.height;switch(e){case U.Top:return{x:o+a/2,y:i};case U.Right:return{x:o+a,y:i+l/2};case U.Bottom:return{x:o+a/2,y:i+l};case U.Left:return{x:o,y:i+l/2}}},go=(e=[],t)=>{if(!e.length)return;let n;return!t&&e.length===1?n=e[0]:t&&(n=e.find(o=>o.id===t)),n||e[0]},As=(e,t,n,o,i,a)=>{const l=mo(n,{...e.dimensions,...e.computedPosition},t),s=mo(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:s.x,targetY:s.y}};function Vs({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:l,height:s,viewport:u}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=Be({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:l/u.zoom,height:s/u.zoom}),v=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),f=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(v*f)>0}const Ds=(e,t)=>{let n=-1;const o=e.reduce((i,a)=>{const l=t(a.source),s=t(a.target);if(!l||!s)return i;const u=a.z?a.z:Math.max(l.computedPosition.z||0,s.computedPosition.z||0);return i[u]?i[u].push(a):i[u]=[a],n=u>n?u:n,i},{});return Object.entries(Object.keys(o).length?o:{0:[]}).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===n}})},xt=(e,t,n)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(l=>{const s=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(s.left-a.left)/n,y:(s.top-a.top)/n,...zn(l)}})},ci=(e,t,n,o,i)=>{i.value=!1,e.selected?e.selected&&t&&o({nodes:[e]}):n([e])};function po(e,t){var n,o;if(t){const i=e.position.x+e.dimensions.width-t.dimensions.width,a=e.position.y+e.dimensions.height-t.dimensions.height;if(i>0||a>0||e.position.x<0||e.position.y<0){if(t.style={...t.style},t.style.width=(n=t.style.width)!=null?n:t.dimensions.width,t.style.height=(o=t.style.height)!=null?o:t.dimensions.height,i>0)if(typeof t.style.width=="string"){const l=parseInt(t.style.width,10);t.style.width=`${l+i}px`}else t.style.width+=i;if(a>0)if(typeof t.style.height=="string"){const l=parseInt(t.style.height,10);t.style.height=`${l+a}px`}else t.style.height+=a;if(e.position.x<0){const l=Math.abs(e.position.x);if(t.position.x=t.position.x-l,typeof t.style.width=="string"){const s=parseInt(t.style.width,10);t.style.width=`${s+l}px`}else t.style.width+=l;e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);if(t.position.y=t.position.y-l,typeof t.style.height=="string"){const s=parseInt(t.style.height,10);t.style.height=`${s+l}px`}else t.style.height+=l;e.position.y=0}}}}const qe=(e,t)=>{let n=t.map(o=>o.id);return e.forEach(o=>{if(o.type==="add"){const l=o.item;return t.push(l)}const i=n.indexOf(o.id),a=t[i];switch(o.type){case"select":(he(a)||Ke(a))&&(a.selected=o.selected);break;case"position":if(he(a)&&(typeof o.position!="undefined"&&(a.position=o.position),typeof o.computedPosition!="undefined"&&(a.computedPosition={...a.computedPosition,...o.computedPosition}),a.expandParent&&a.parentNode)){const l=t[n.indexOf(a.parentNode)];l&&he(l)&&po(a,l)}break;case"dimensions":if(he(a)&&(typeof o.dimensions!="undefined"&&(a.dimensions=o.dimensions),a.expandParent&&a.parentNode)){const l=t[n.indexOf(a.parentNode)];l&&he(l)&&po(a,l)}break;case"remove":n.includes(o.id)&&(t.splice(i,1),n=t.map(l=>l.id));break}}),t},Hs=(e,t)=>qe(e,t),Ls=(e,t)=>qe(e,t),_t=(e,t)=>({id:e,type:"select",selected:t}),yo=e=>({item:e,type:"add"}),Ut=e=>({id:e,type:"remove"}),wo=(e,t)=>e.reduce((n,o)=>{const i=t.includes(o.id);return!o.selected&&i?(o.selected=!0,n.push(_t(o.id,!0))):o.selected&&!i&&(o.selected=!1,n.push(_t(o.id,!1))),n},[]),Fs=e=>typeof e!="undefined",Zs=(e,t)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),!1;let n;return le(e)?n={...e}:n={...e,id:zt(e)},n=On(n),Pn(n,t)?!1:n},Us=(e,t,n,o)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),!1;if(!n.find(l=>Ke(l)&&l.id===e.id))return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),!1;n.splice(n.indexOf(e),1);const a={...e,id:zt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return o([a]),a},xo=(e,t,n,o)=>{const i={},a=e.map(l=>{const s=r.shallowReactive(Ms(l,o,{...t(l.id),parentNode:l.parentNode}));return l.parentNode&&(i[l.parentNode]=!0),s});return a.forEach(l=>{const s=[...a,...n];if(l.parentNode&&!s.find(u=>u.id===l.parentNode)&&console.warn(`[vueflow]: Parent node ${l.parentNode} not found`),l.parentNode||i[l.id]){i[l.id]&&(l.isParent=!0);const u=l.parentNode?t(l.parentNode):void 0;u&&(u.isParent=!0)}}),a};function _o(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n.value)return!1;o=o.parentElement}while(o);return!1}function Ws(e,t,n,o){return e.filter(i=>(i.selected||i.id===o)&&(!i.parentNode||!ui(i,n))).map(i=>{var a,l;return{id:i.id,position:i.computedPosition||{x:0,y:0,z:0},distance:{x:t.x-((a=i.computedPosition)==null?void 0:a.x)||0,y:t.y-((l=i.computedPosition)==null?void 0:l.y)||0},extent:i.extent,parentNode:i.parentNode,dimensions:i.dimensions}})}function Wt({id:e,dragItems:t,getNode:n}){const o=t.map(i=>({...n.value(i.id)}));return[e?o.find(i=>i.id===e):o[0],o]}function Gs(e,t,n,o){const i={x:t.x-e.distance.x,y:t.y-e.distance.y},a=pn(e,o,n);return e.position=a?Ge(i,a):i,e}function pn(e,t,n){var i,a,l,s;let o=e.extent||t;if(e.extent==="parent"&&n)e.parentNode&&e.dimensions.width&&e.dimensions.height&&(o=n.computedPosition&&n.dimensions.width&&n.dimensions.height?[[n.computedPosition.x,n.computedPosition.y],[n.computedPosition.x+n.dimensions.width-e.dimensions.width,n.computedPosition.y+n.dimensions.height-e.dimensions.height]]:o);else if(e.extent&&e.parentNode){const u=e.extent,c=(a=(i=n==null?void 0:n.computedPosition)==null?void 0:i.x)!=null?a:0,d=(s=(l=n==null?void 0:n.computedPosition)==null?void 0:l.y)!=null?s:0;o=[[u[0][0]+c,u[0][1]+d],[u[1][0]+c,u[1][1]+d]]}return o}const Ks=["data-id"],qs={name:"Node",inheritAttrs:!1},Xs=r.defineComponent({...qs,props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:{type:Boolean},snapGrid:null,type:{type:[null,Function,Object,Boolean]},name:null,node:null},setup(e){const t=r.createPropsRestProxy(e,["id","type","name","draggable","selectable","connectable","snapGrid"]);r.provide($n,e.id);const n=X(),o=r.toRef(n,"nodeExtent"),i=r.toRef(n,"edges"),a=r.toRef(n,"viewport"),l=r.toRef(n,"noPanClassName"),s=r.toRef(n,"selectNodesOnDrag"),u=r.toRef(n,"nodesSelectionActive"),c=r.toRef(n,"multiSelectionActive"),d=r.toRef(n,"emits"),v=r.toRef(n,"getNode"),f=r.toRef(n,"removeSelectedElements"),x=r.toRef(n,"addSelectedNodes"),g=r.toRef(n,"updateNodeDimensions"),m=r.toRef(n,"onUpdateNodeInternals"),h=rt(t,"node"),_=r.computed(()=>h.value.parentNode?v.value(h.value.parentNode):void 0),R=r.ref(),{emit:C,on:y}=wu(h.value,d.value);let $=r.effectScope();const N=wi({id:e.id,el:R,disabled:r.computed(()=>!e.draggable),onStart(b,M,p){C.dragStart({event:b,node:M,nodes:p})},onDrag(b,M,p){C.drag({event:b,node:M,nodes:p})},onStop(b,M,p){C.dragStop({event:b,node:M,nodes:p})}}),T=Bo(R,()=>{g.value([{id:e.id,nodeElement:R.value}])},{box:"content-box"}),F=(b,M)=>{M?h.value.computedPosition=Is({x:M.x,y:M.y,z:M.z},b):h.value.computedPosition=b},A=()=>{R.value&&g.value([{id:e.id,nodeElement:R.value,forceUpdate:!0}]);const b=pn(h.value,o.value,_.value),M=b&&typeof b!="string"?Ge(h.value.position,b):h.value.position;F({...M,z:h.value.computedPosition.z?h.value.computedPosition.z:h.value.selected?1e3:0},_.value?{..._.value.computedPosition}:void 0)};m.value(b=>{b.includes(e.id)&&A()}),r.onMounted(()=>{A(),$||($=r.effectScope()),$.run(()=>{r.watch([()=>h.value.width,()=>h.value.height,()=>h.value.type,()=>h.value.sourcePosition,()=>h.value.targetPosition],()=>{g.value([{id:e.id,nodeElement:R.value,forceUpdate:!0}])},{flush:"post"}),r.watch([()=>h.value.position.x,()=>h.value.position.y,()=>{var b;return(b=_.value)==null?void 0:b.computedPosition.x},()=>{var b;return(b=_.value)==null?void 0:b.computedPosition.y},()=>{var b;return(b=_.value)==null?void 0:b.computedPosition.z},()=>h.value.selected,()=>h.value.dimensions,()=>{var b;return(b=_.value)==null?void 0:b.dimensions}],([b,M,p,E,V])=>{const D=pn(h.value,o.value,_.value),S={...D&&typeof D!="string"?Ge({x:b,y:M},D):{x:b,y:M},z:h.value.selected?1e3:0};F(S,p&&E?{x:p,y:E,z:V}:void 0),h.value.handleBounds={source:xt(".source",R.value,a.value.zoom),target:xt(".target",R.value,a.value.zoom)}},{flush:"post"})})}),r.onBeforeUnmount(()=>{T.stop(),$==null||$.stop(),$=void 0});const G=b=>{N!=null&&N.value||C.mouseEnter({event:b,node:h.value,connectedEdges:Y([h.value],i.value)})},L=b=>{N!=null&&N.value||C.mouseMove({event:b,node:h.value,connectedEdges:Y([h.value],i.value)})},W=b=>{N!=null&&N.value||C.mouseLeave({event:b,node:h.value,connectedEdges:Y([h.value],i.value)})},I=b=>{C.contextMenu({event:b,node:h.value,connectedEdges:Y([h.value],i.value)})},w=b=>{C.doubleClick({event:b,node:h.value,connectedEdges:Y([h.value],i.value)})},z=b=>{e.selectable&&(!s.value||!e.draggable)&&ci(h.value,c.value,x.value,f.value,u),C.click({event:b,node:h.value,connectedEdges:Y([h.value],i.value)})},k=r.computed(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),O=r.computed(()=>{const b=(h.value.style instanceof Function?h.value.style(h.value):h.value.style)||{},M=h.value.width instanceof Function?h.value.width(h.value):h.value.width,p=h.value.height instanceof Function?h.value.height(h.value):h.value.height;return M&&(b.width=typeof M=="string"?M:`${M}px`),p&&(b.height=typeof p=="string"?p:`${p}px`),b});return(b,M)=>{var p;return r.openBlock(),r.createElementBlock("div",{ref_key:"nodeElement",ref:R,class:r.normalizeClass(["vue-flow__node",[`vue-flow__node-${e.name}`,l.value,{dragging:r.unref(N),selected:h.value.selected,selectable:e.selectable},r.unref(k)]]),style:r.normalizeStyle({zIndex:(p=h.value.computedPosition.z)!=null?p:0,transform:`translate(${h.value.computedPosition.x}px,${h.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...r.unref(O)}),"data-id":h.value.id,onMouseenter:G,onMousemove:L,onMouseleave:W,onContextmenu:I,onClick:z,onDblclick:w},[(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.type),{id:h.value.id,type:h.value.type,data:h.value.data,events:{...h.value.events,...r.unref(y)},selected:!!h.value.selected,connectable:e.connectable,position:h.value.position,dimensions:h.value.dimensions,"is-valid-target-pos":h.value.isValidTargetPos,"is-valid-source-pos":h.value.isValidSourcePos,"parent-node":h.value.parentNode,dragging:r.unref(N),"z-index":h.value.computedPosition.z,"target-position":h.value.targetPosition,"source-position":h.value.sourcePosition,label:h.value.label,"drag-handle":h.value.dragHandle,onUpdateNodeInternals:A},null,40,["id","type","data","events","selected","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","dragging","z-index","target-position","source-position","label","drag-handle"]))],46,Ks)}}}),Qs=["transform"],js=["width","height","x","y","rx","ry"],Ys=["y"],Js={name:"EdgeText"},di=r.defineComponent({...Js,props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=_n("el",null);let n=r.ref({x:0,y:0,width:0,height:0});r.onMounted(()=>{n.value=t.value.getBBox()});const o=r.computed(()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`);return(i,a)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${n.value.width+2*e.labelBgPadding[0]}px`,height:`${n.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,js)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(i.$attrs,{ref:"el",class:"vue-flow__edge-text",y:n.value.height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(i.$slots,"default",{},()=>[typeof e.label!="string"&&typeof e.label?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0})):(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64))])],16,Ys)],8,Qs))}}),be=function({path:e,centerX:t,centerY:n,label:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:s,labelStyle:u,markerStart:c,markerEnd:d,style:v}){return[r.h("path",{style:{...v},d:e,class:"vue-flow__edge-path","marker-end":d,"marker-start":c}),o?r.h(di,{x:t,y:n,label:o,labelStyle:u,labelShowBg:s,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};be.props=["path","centerX","centerY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","style"];be.inheritAttrs=!1;function it(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function bt({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let l,s;switch(e){case U.Left:l=t-it(t-o,a),s=n;break;case U.Right:l=t+it(o-t,a),s=n;break;case U.Top:l=t,s=n-it(n-i,a);break;case U.Bottom:l=t,s=n+it(i-n,a);break}return[l,s]}function An({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top,curvature:l=.25}){const[s,u]=bt({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[c,d]=bt({pos:a,x1:o,y1:i,x2:e,y2:t,c:l});return`M${e},${t} C${s},${u} ${c},${d} ${o},${i}`}function fi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top,curvature:l=.25}){const[s,u]=bt({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[c,d]=bt({pos:a,x1:o,y1:i,x2:e,y2:t,c:l}),v=e*.125+s*.375+c*.375+o*.125,f=t*.125+u*.375+d*.375+i*.125,x=Math.abs(v-e),g=Math.abs(f-t);return[v,f,x,g]}function kt({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,l;switch(e){case U.Left:case U.Right:a=.5*(t+o),l=n;break;case U.Top:case U.Bottom:a=t,l=.5*(n+i);break}return[a,l]}function hi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top}){const[l,s]=kt({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,c]=kt({pos:a,x1:o,y1:i,x2:e,y2:t});return`M${e},${t} C${l},${s} ${u},${c} ${o},${i}`}function vi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top}){const[l,s]=kt({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,c]=kt({pos:a,x1:o,y1:i,x2:e,y2:t}),d=e*.125+l*.375+u*.375+o*.125,v=t*.125+s*.375+c*.375+i*.125,f=Math.abs(d-e),x=Math.abs(v-t);return[d,v,f,x]}const bo=[U.Left,U.Right],Vn=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:i=U.Bottom,targetPosition:a=U.Top})=>{const l=bo.includes(i),s=bo.includes(a);if(l&&!s||s&&!l){const x=l?Math.abs(n-e):0,g=e>n?e-x:e+x,m=l?0:Math.abs(o-t),h=t<o?t+m:t-m;return[g,h,x,m]}const c=Math.abs(n-e)/2,d=n<e?n+c:n-c,v=Math.abs(o-t)/2,f=o<t?o+v:o-v;return[d,f,c,v]},Gt=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e+n},${t}`,Kt=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t-n}`,qt=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e-n},${t}`,Xt=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t-n}`,Qt=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t+n}`,jt=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e+n},${t}`,Yt=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e-n},${t}`,Jt=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t+n}`;function Nt({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:i,targetPosition:a=U.Top,borderRadius:l=5,centerX:s,centerY:u}){const[c,d,v,f]=Vn({sourceX:e,sourceY:t,targetX:o,targetY:i}),x=Math.min(l,Math.abs(o-e)),g=Math.min(l,Math.abs(i-t)),m=Math.min(x,g,v,f),h=[U.Left,U.Right],_=typeof s!="undefined"?s:c,R=typeof u!="undefined"?u:d;let C,y;return e<=o?(C=t<=i?Gt(e,R,m):jt(e,R,m),y=t<=i?Jt(o,R,m):Xt(o,R,m)):(C=t<i?qt(e,R,m):Yt(e,R,m),y=t<i?Qt(o,R,m):Kt(o,R,m)),h.includes(n)&&h.includes(a)?e<=o?(C=t<=i?Jt(_,t,m):Xt(_,t,m),y=t<=i?Gt(_,i,m):jt(_,i,m)):(n===U.Right&&a===U.Left||n===U.Left&&a===U.Right||n===U.Left&&a===U.Left)&&(C=t<=i?Qt(_,t,m):Kt(_,t,m),y=t<=i?qt(_,i,m):Yt(_,i,m)):h.includes(n)&&!h.includes(a)?(e<=o?C=t<=i?Jt(o,t,m):Xt(o,t,m):C=t<=i?Qt(o,t,m):Kt(o,t,m),y=""):!h.includes(n)&&h.includes(a)&&(e<=o?C=t<=i?Gt(e,i,m):jt(e,i,m):C=t<=i?qt(e,i,m):Yt(e,i,m),y=""),`M ${e},${t}${C}${y}L ${o},${i}`}const Pt=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:l,labelBgBorderRadius:s,sourceY:u,sourceX:c,targetX:d,targetY:v,curvature:f,markerEnd:x,markerStart:g,style:m}){const[h,_]=fi({sourceX:c,sourceY:u,targetX:d,targetY:v,sourcePosition:e,targetPosition:t,curvature:f}),R=An({sourceX:c,sourceY:u,targetX:d,targetY:v,sourcePosition:e,targetPosition:t,curvature:f});return r.h(be,{path:R,centerX:h,centerY:_,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,style:m,markerEnd:x,markerStart:g})};Pt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","style"];Pt.inheritAttrs=!1;const Tt=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:l,labelBgBorderRadius:s,sourceY:u,sourceX:c,targetX:d,targetY:v,markerEnd:f,markerStart:x,style:g}){const[m,h]=vi({sourceX:c,sourceY:u,targetX:d,targetY:v,sourcePosition:e,targetPosition:t}),_=hi({sourceX:c,sourceY:u,targetX:d,targetY:v,sourcePosition:e,targetPosition:t});return r.h(be,{path:_,centerX:m,centerY:h,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,style:g,markerEnd:f,markerStart:x})};Tt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];Tt.inheritAttrs=!1;const Ye=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,labelStyle:o={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:l,labelBgBorderRadius:s,sourceY:u,sourceX:c,targetX:d,targetY:v,markerEnd:f,markerStart:x,borderRadius:g,style:m}){const[h,_]=Vn({sourceX:c,sourceY:u,targetX:d,targetY:v,sourcePosition:e,targetPosition:t}),R=Nt({sourceX:c,sourceY:u,targetX:d,targetY:v,sourcePosition:e,targetPosition:t,borderRadius:g});return r.h(be,{path:R,centerX:h,centerY:_,label:n,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,style:m,markerEnd:f,markerStart:x})};Ye.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","style"];Ye.inheritAttrs=!1;const It=function(e){return r.h(Ye,{...e,borderRadius:0})};It.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];It.inheritAttrs=!1;const At=function({label:e,labelStyle:t={},labelShowBg:n=!0,labelBgStyle:o={},labelBgPadding:i,labelBgBorderRadius:a,sourceY:l,sourceX:s,targetX:u,targetY:c,markerEnd:d,markerStart:v,style:f}){const x=r.computed(()=>{const m=Math.abs(c-l)/2;return c<l?c+m:c-m}),g=r.computed(()=>{const m=Math.abs(u-s)/2;return u<s?u+m:u-m});return r.h(be,{path:`M ${s},${l}L ${u},${c}`,centerX:g.value,centerY:x.value,label:e,labelStyle:t,labelShowBg:n,labelBgStyle:o,labelBgPadding:i,labelBgBorderRadius:a,style:f,markerEnd:d,markerStart:v})};At.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"];At.inheritAttrs=!1;const eu=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,tu=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,yn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=U.Top}){const i=r.computed(()=>{const l=eu(t,e,o);return isNaN(l)?0:l}),a=r.computed(()=>{const l=tu(n,e,o);return isNaN(l)?0:l});return r.h("circle",{class:"vue-flow__edgeupdater",cx:i.value,cy:a.value,r:e,stroke:"transparent",fill:"transparent"})};yn.props=["radius","centerX","centerY","position"];const nu=r.defineComponent({props:["name","type","id","data","events","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelStyle","labelShowBg","style","animated","label","updatable","selectable","target","source","sourceNode","targetNode","sourceHandleId","targetHandleId","selected","markerEnd","markerStart","connectionMode","edgeUpdaterRadius","updating"],emits:["source-mousedown","target-mousedown"],setup(e,{emit:t}){let n=r.ref(!1);const o=()=>n.value=!0,i=()=>n.value=!1,a=s=>{t("source-mousedown",s)},l=s=>{t("target-mousedown",s)};return()=>{var _,R;if(!e.sourceNode||!e.targetNode)return null;let s;e.connectionMode===_e.Strict?s=e.sourceNode.handleBounds.source:s=(_=e.sourceNode.handleBounds.source)!=null?_:e.sourceNode.handleBounds.target;const u=go(s,e.sourceHandleId);let c;e.connectionMode===_e.Strict?c=e.targetNode.handleBounds.target:c=(R=e.targetNode.handleBounds.target)!=null?R:e.targetNode.handleBounds.source;const d=go(c,e.targetHandleId),v=u?u.position:U.Bottom,f=d?d.position:U.Top,{sourceX:x,sourceY:g,targetY:m,targetX:h}=As(e.sourceNode,u,v,e.targetNode,d,f);return r.h("g",{class:["vue-flow__edge",`vue-flow__edge-${e.name}`,{updating:n.value,selected:e.selected,animated:e.animated,inactive:!e.selectable}]},[e.updating?null:r.h(e.type,{id:e.id,sourceNode:e.sourceNode,targetNode:e.targetNode,source:e.source,target:e.target,updatable:e.updatable,selected:e.selected,animated:e.animated,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,data:e.data,events:e.events,style:e.style,markerStart:`url(#${ve(e.markerStart)})`,markerEnd:`url(#${ve(e.markerEnd)})`,sourcePosition:v,targetPosition:f,sourceX:x,sourceY:g,targetX:h,targetY:m,sourceHandleId:e.sourceHandleId,targetHandleId:e.targetHandleId}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:a,onMouseenter:o,onMouseout:i},r.h(yn,{position:v,centerX:x,centerY:g,radius:e.edgeUpdaterRadius}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:l,onMouseenter:o,onMouseout:i},r.h(yn,{position:f,centerX:h,centerY:m,radius:e.edgeUpdaterRadius}))]:null]])}}}),ou={class:"vue-flow__connection"},iu=["d","marker-end","marker-start"],ru={name:"ConnectionLine"},au=r.defineComponent({...ru,props:{sourceNode:null},setup(e){var N,T,F,A;const t=X(),n=r.toRef(t,"getNodes"),o=r.toRef(t,"connectionHandleId"),i=r.toRef(t,"connectionHandleType"),a=r.toRef(t,"connectionPosition"),l=r.toRef(t,"connectionLineType"),s=r.toRef(t,"connectionLineStyle");r.toRef(t,"connectionNodeId");const u=r.toRef(t,"connectionLineOptions"),c=r.toRef(t,"viewport"),d=(N=r.inject(Bt))==null?void 0:N["connection-line"],v=d==null?void 0:d({}),f=o.value&&i.value?(T=e.sourceNode.handleBounds[i.value])==null?void 0:T.find(G=>G.id===o.value):i.value&&((A=e.sourceNode.handleBounds[(F=i.value)!=null?F:"source"])==null?void 0:A[0]),x=f?f.x+f.width/2:e.sourceNode.dimensions.width/2,g=f?f.y+f.height/2:e.sourceNode.dimensions.height,m=e.sourceNode.computedPosition.x+x,h=e.sourceNode.computedPosition.y+g,R=(f==null?void 0:f.position)===U.Left||(f==null?void 0:f.position)===U.Right?U.Left:U.Top,C=r.computed(()=>(a.value.x-c.value.x)/c.value.zoom),y=r.computed(()=>(a.value.y-c.value.y)/c.value.zoom),$=r.computed(()=>{let G=`M${m},${h} ${C.value},${y.value}`;switch(l.value||u.value.type){case we.Bezier:G=An({sourceX:m,sourceY:h,sourcePosition:f==null?void 0:f.position,targetX:C.value,targetY:y.value,targetPosition:R});break;case we.Step:G=Nt({sourceX:m,sourceY:h,sourcePosition:f==null?void 0:f.position,targetX:C.value,targetY:y.value,targetPosition:R,borderRadius:0});break;case we.SmoothStep:G=Nt({sourceX:m,sourceY:h,sourcePosition:f==null?void 0:f.position,targetX:C.value,targetY:y.value,targetPosition:R});break}return G});return(G,L)=>{var W;return r.openBlock(),r.createElementBlock("g",ou,[r.unref(v)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(d)),r.normalizeProps(r.mergeProps({key:0},{sourceX:m,sourceY:h,sourcePosition:(W=r.unref(f))==null?void 0:W.position,targetX:C.value,targetY:y.value,targetPosition:r.unref(R),nodes:n.value,sourceNode:e.sourceNode,sourceHandle:r.unref(f),markerEnd:`url(#${r.unref(ve)(u.value.markerEnd)})`,markerStart:`url(#${r.unref(ve)(u.value.markerStart)})`})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref($),class:r.normalizeClass(["vue-flow__connection-path",u.value.class]),style:r.normalizeStyle(s.value||u.value.style||{}),"marker-end":`url(#${r.unref(ve)(u.value.markerEnd)})`,"marker-start":`url(#${r.unref(ve)(u.value.markerStart)})`},null,14,iu))])}}}),lu={name:"NodesSelection"},su=r.defineComponent({...lu,setup(e){const t=X(),n=r.toRef(t,"emits");r.toRef(t,"setState");const o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes");r.toRef(t,"snapToGrid"),r.toRef(t,"snapGrid");const a=r.toRef(t,"noPanClassName"),l=r.ref();wi({el:l,onStart(d,v,f){n.value.selectionDragStart({event:d,node:v,nodes:f})},onDrag(d,v,f){n.value.selectionDrag({event:d,node:v,nodes:f})},onStop(d,v,f){n.value.selectionDragStop({event:d,node:v,nodes:f})}});const s=r.computed(()=>Ot(i.value)),u=r.computed(()=>({width:`${s.value.width}px`,height:`${s.value.height}px`,top:`${s.value.y}px`,left:`${s.value.x}px`})),c=d=>n.value.selectionContextMenu({event:d,nodes:i.value});return(d,v)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",a.value]),style:r.normalizeStyle({transform:`translate(${o.value.x}px,${o.value.y}px) scale(${o.value.zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:l,class:"vue-flow__nodesselection-rect",style:r.normalizeStyle(r.unref(u)),onContextmenu:c},null,36)],6))}}),uu={name:"SelectionRect"},cu=r.defineComponent({...uu,props:{width:null,height:null,x:null,y:null},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection",style:r.normalizeStyle({width:`${e.width}px`,height:`${e.height}px`,transform:`translate(${e.x}px, ${e.y}px)`})},null,4))}});function ko(e){const t=e.target.closest(".vue-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const du={ref:"user-selection",class:"vue-flow__selectionpane vue-flow__container"},fu={name:"UserSelection"},hu=r.defineComponent({...fu,setup(e){const{userSelectionActive:t,nodesSelectionActive:n,getNodes:o,getEdges:i,viewport:a,addSelectedEdges:l,addSelectedNodes:s}=X(),u=_n("user-selection",null);let c=r.ref(0),d=r.ref(0);const v=()=>({width:0,height:0,startX:0,startY:0,x:0,y:0,draw:!1});let f=r.ref(v());const x=()=>{f.value=v(),c.value=0,d.value=0,t.value=!1},g=R=>{const C=ko(R);!C||(f.value={width:0,height:0,startX:C.x,startY:C.y,x:C.x,y:C.y,draw:!0},t.value=!0,n.value=!0)},m=R=>{if(!t||!f.value.draw)return;const C=ko(R);if(!C)return;const y=f.value.startX,$=f.value.startY,N={...f.value,x:C.x<y?C.x:f.value.x,y:C.y<$?C.y:f.value.y,width:Math.abs(C.x-y),height:Math.abs(C.y-$)},T=In(o.value,f.value,a.value),F=Y(T,i.value);f.value=N,s(T),l(F),c.value=T.length,d.value=F.length},h=()=>{f.value=v(),n.value=c.value>0,t.value=!1},_=()=>{n.value=c.value>0,x()};return re(u,"mousedown",g),re(u,"mousemove",m),re(u,"click",h),re(u,"mouseup",h),re(u,"mouseleave",_),r.onBeforeUnmount(x),(R,C)=>(r.openBlock(),r.createElementBlock("div",du,[f.value.draw?(r.openBlock(),r.createBlock(cu,{key:0,width:f.value.width,height:f.value.height,x:f.value.x,y:f.value.y},null,8,["width","height","x","y"])):r.createCommentVNode("",!0)],512))}}),mi={input:Bn,default:Mn,output:Rn},gi={default:Pt,straight:At,step:It,smoothstep:Ye,simplebezier:Tt},vu=e=>typeof e!="undefined",mu=()=>({vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Ue.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultZoom:1,defaultPosition:[0,0],nodesSelectionActive:!1,userSelectionActive:!1,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:we.Bezier,connectionLineOptions:{type:we.Bezier,style:{}},connectionNodeId:null,connectionHandleId:null,connectionHandleType:null,connectionPosition:{x:NaN,y:NaN},connectionMode:_e.Loose,connectionStartHandle:null,connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",hooks:Es(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,vueFlowVersion:"0.4.37"});var pi=e=>{const t=mu();return e&&Object.keys(e).forEach(n=>{const o=e[n];vu(o)&&(t[n]=o)}),t},gu=(e,t)=>{const n=p=>{e.hooks.updateNodeInternals.trigger(p)},o=r.ref();e.hooks.paneReady.on(({id:p})=>{o.value=yi(p)});const i=async()=>new Promise(p=>{o.value?p(o.value):Ve(o).not.toBeUndefined().then(()=>p(o.value))}),a=(p,E,V)=>{const D=[];p.forEach(B=>{var P,K,H,q;const S={id:B.id,type:"position",dragging:V};if(E&&(S.computedPosition=B.position,S.position=B.position,B.parentNode)){const Q=t.getNode.value(B.parentNode);S.position={x:S.position.x-((K=(P=Q==null?void 0:Q.computedPosition)==null?void 0:P.x)!=null?K:0),y:S.position.y-((q=(H=Q==null?void 0:Q.computedPosition)==null?void 0:H.y)!=null?q:0)}}D.push(S)}),D!=null&&D.length&&e.hooks.nodesChange.trigger(D)},l=p=>{const E=p.reduce((V,D)=>{const B=t.getNode.value(D.id);if(B){const S=zn(D.nodeElement),P=!!(S.width&&S.height&&(B.dimensions.width!==S.width||B.dimensions.height!==S.height)||D.forceUpdate);B.handleBounds={source:xt(".source",D.nodeElement,e.viewport.zoom),target:xt(".target",D.nodeElement,e.viewport.zoom)},P&&(B.dimensions=S,V.push({id:B.id,type:"dimensions",dimensions:S}))}return V},[]);E.length&&e.hooks.nodesChange.trigger(E)},s=(p,E)=>{const V=p.map(B=>B.id);let D;e.multiSelectionActive?D=V.map(B=>_t(B,E)):D=wo(e.nodes,V),D.length&&e.hooks.nodesChange.trigger(D)},u=(p,E)=>{const V=p.map(B=>B.id);let D;e.multiSelectionActive?D=V.map(B=>_t(B,E)):D=wo(e.edges,V),D.length&&e.hooks.edgesChange.trigger(D)},c=p=>{s(p,!0)},d=p=>{u(p,!0)},v=p=>{c(p.filter(he)),d(p.filter(Ke))},f=p=>{s(p,!1)},x=p=>{u(p,!1)},g=p=>{p?(p.nodes&&f(p.nodes.filter(he)),p.edges&&x(p.edges.filter(Ke))):(f([]),x([]))},m=p=>{var E;(E=e.d3Zoom)==null||E.scaleExtent([p,e.maxZoom]),e.minZoom=p},h=p=>{var E;(E=e.d3Zoom)==null||E.scaleExtent([e.minZoom,p]),e.maxZoom=p},_=p=>{var E;(E=e.d3Zoom)==null||E.translateExtent(p),e.translateExtent=p},R=async p=>{if(e.nodeExtent=p,o.value){const E=t.getNodes.value.map(V=>V.id);n(E)}},C=p=>{e.nodesDraggable=p,e.nodesConnectable=p,e.elementsSelectable=p},y=(p,E)=>{if(!e.initialized&&!p.length)return;e.nodes||(e.nodes=[]);const V=p instanceof Function?p(e.nodes):p;e.nodes=xo(V,t.getNode.value,e.nodes,E!=null?E:e.nodeExtent)},$=p=>{if(!e.initialized&&!p.length)return;const E=p instanceof Function?p(e.edges):p;e.edges=E.reduce((V,D)=>{const B=t.getNode.value(D.source),S=t.getNode.value(D.target),P=!B||typeof B=="undefined",K=!S||typeof S=="undefined";if(P&&console.warn(`[vue-flow]: Couldn't create edge for source id: ${D.source}; edge id: ${D.id}`),K&&console.warn(`[vue-flow]: Couldn't create edge for target id: ${D.target}; edge id: ${D.id}`),P||K)return V;const H=t.getEdge.value(D.id);return V.push(r.shallowReactive({...On(D,Object.assign({},H,e.defaultEdgeOptions)),sourceNode:B,targetNode:S})),V},[])},N=(p,E)=>{if(!e.initialized&&!p.length||!p)return;const V=p instanceof Function?p([...e.nodes,...e.edges]):p;y(V.filter(Rt),E),$(V.filter(le))},T=(p,E)=>{const V=p instanceof Function?p(e.nodes):p,B=xo(V,t.getNode.value,e.nodes,E!=null?E:e.nodeExtent).map(yo);B.length&&e.hooks.nodesChange.trigger(B)},F=p=>{const V=(p instanceof Function?p(e.edges):p).reduce((D,B)=>{const S=Zs({...B,...e.defaultEdgeOptions},e.edges);if(S){const P=t.getNode.value(S.source),K=t.getNode.value(S.target),H=!P||typeof P=="undefined",q=!K||typeof K=="undefined";if(H&&console.warn(`[vueflow]: Couldn't create edge for source id: ${S.source}; edge id: ${S.id}`),q&&console.warn(`[vueflow]: Couldn't create edge for target id: ${S.target}; edge id: ${S.id}`),q||H)return D;D.push(yo(r.shallowReactive({...S,sourceNode:P,targetNode:K})))}return D},[]);V.length&&e.hooks.edgesChange.trigger(V)},A=(p,E=!0)=>{const V=p instanceof Function?p(e.nodes):p,D=[],B=[];V.forEach(S=>{if(D.push(Ut(typeof S=="string"?S:S.id)),E){const P=Y([typeof S=="string"?{id:S}:S],e.edges);B.push(...P.map(K=>Ut(K.id)))}}),D.length&&e.hooks.nodesChange.trigger(D),B.length&&e.hooks.edgesChange.trigger(B)},G=p=>{const E=p instanceof Function?p(e.edges):p,V=[];E.forEach(D=>{V.push(Ut(typeof D=="string"?D:D.id))}),e.hooks.edgesChange.trigger(V)},L=r.computed(()=>e.nodes.map(p=>p.id)),W=r.computed(()=>e.edges.map(p=>p.id)),I=p=>e.nodes&&!L.value.length?e.nodes.find(E=>E.id===p):e.nodes[L.value.indexOf(p)],w=p=>e.edges&&!W.value.length?e.edges.find(E=>E.id===p):e.edges[W.value.indexOf(p)],z=(p,E)=>Us(p,E,e.edges,F),k=p=>qe(p,e.nodes),O=p=>qe(p,e.edges),b=p=>{var B,S;const E=p instanceof Function?p(e):p,V=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"];typeof E.modelValue!="undefined"&&N(E.modelValue,(B=E.nodeExtent)!=null?B:e.nodeExtent),typeof E.nodes!="undefined"&&y(E.nodes,(S=E.nodeExtent)!=null?S:e.nodeExtent),typeof E.edges!="undefined"&&$(E.edges);const D=()=>{typeof E.maxZoom!="undefined"&&h(E.maxZoom),typeof E.minZoom!="undefined"&&m(E.minZoom),typeof E.translateExtent!="undefined"&&_(E.translateExtent),typeof E.nodeExtent!="undefined"&&R(E.nodeExtent)};Object.keys(E).forEach(P=>{const K=E[P];!V.includes(P)&&Fs(K)&&(e[P]=K)}),e.d3Zoom?D():Ve(()=>e.d3Zoom).not.toBeUndefined().then(D),e.initialized||(e.initialized=!0)};return{updateNodePositions:a,updateNodeDimensions:l,setElements:N,setNodes:y,setEdges:$,addNodes:T,addEdges:F,removeNodes:A,removeEdges:G,findNode:I,findEdge:w,updateEdge:z,applyEdgeChanges:O,applyNodeChanges:k,addSelectedElements:v,addSelectedNodes:c,addSelectedEdges:d,setMinZoom:m,setMaxZoom:h,setTranslateExtent:_,setNodeExtent:R,removeSelectedElements:g,removeSelectedNodes:f,removeSelectedEdges:x,setInteractive:C,setState:b,fitView:async(p={padding:.1})=>{const{fitView:E}=await i();E(p)},zoomIn:async p=>{const{zoomIn:E}=await i();E(p)},zoomOut:async p=>{const{zoomOut:E}=await i();E(p)},zoomTo:async(p,E)=>{const{zoomTo:V}=await i();V(p,E)},setTransform:async(p,E)=>{const{setTransform:V}=await i();V(p,E)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),setCenter:async(p,E,V)=>{const{setCenter:D}=await i();D(p,E,V)},fitBounds:async(p,E)=>{const{fitBounds:V}=await i();V(p,E)},project:p=>Tn(p,e.viewport,e.snapToGrid,e.snapGrid),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:n,$reset:()=>{b(pi())},$destroy:()=>{}}},pu=e=>{const t=r.computed(()=>e.nodes.map(g=>g.id)),n=r.computed(()=>e.edges.map(g=>g.id)),o=r.computed(()=>g=>e.nodes&&!t.value.length?e.nodes.find(m=>m.id===g):e.nodes[t.value.indexOf(g)]),i=r.computed(()=>g=>e.edges&&!n.value.length?e.edges.find(m=>m.id===g):e.edges[n.value.indexOf(g)]),a=r.computed(()=>{var h;const g={...gi,...e.edgeTypes},m=Object.keys(g);return(h=e.edges)==null||h.forEach(_=>_.type&&!m.includes(_.type)&&(g[_.type]=_.type)),g}),l=r.computed(()=>{var h;const g={...mi,...e.nodeTypes},m=Object.keys(g);return(h=e.nodes)==null||h.forEach(_=>_.type&&!m.includes(_.type)&&(g[_.type]=_.type)),g}),s=r.computed(()=>{const g=e.nodes.filter(m=>!m.hidden);return e.onlyRenderVisibleElements?g&&In(g,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):g!=null?g:[]}),u=(g,m,h)=>(m=m!=null?m:o.value(g.source),h=h!=null?h:o.value(g.target),!m||!h?(console.warn(`[vue-flow]: Orphaned edge ${g.id} will be removed.`),e.edges.splice(e.edges.indexOf(g),1),!0):!g.hidden&&h&&!h.hidden&&m&&!m.hidden&&m.dimensions.width&&m.dimensions.height&&h.dimensions.width&&h.dimensions.height),c=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(g=>{const m=o.value(g.source),h=o.value(g.target);return u(g,m,h)&&Vs({sourcePos:m.computedPosition||{x:0,y:0},targetPos:h.computedPosition||{x:0,y:0},sourceWidth:m.dimensions.width,sourceHeight:m.dimensions.height,targetWidth:h.dimensions.width,targetHeight:h.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(g=>u(g))),d=r.computed(()=>[...s.value,...c.value]),v=r.computed(()=>e.nodes.filter(g=>g.selected)),f=r.computed(()=>e.edges.filter(g=>g.selected)),x=r.computed(()=>{var g,m;return[...(g=v.value)!=null?g:[],...(m=f.value)!=null?m:[]]});return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:l,getEdges:c,getNodes:s,getSelectedElements:x,getSelectedNodes:v,getSelectedEdges:f}};class pe{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return pe.instance||(pe.instance=new pe),pe.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=pi(n),i=r.reactive(o),a=pu(i),l=gu(i,a),s={};Object.entries(i.hooks).forEach(([d,v])=>{const f=`on${d.charAt(0).toUpperCase()+d.slice(1)}`;s[f]=v.on});const u={};Object.entries(i.hooks).forEach(([d,v])=>{u[d]=v.trigger}),l.setState(i),n&&(n.modelValue&&l.setElements(n.modelValue),n.nodes&&l.setNodes(n.nodes),n.edges&&l.setEdges(n.edges));const c={...s,...a,...l,...r.toRefs(i),emits:u,id:t,$destroy:()=>{this.remove(t)}};return this.set(t,c),c}getId(){return`vue-flow-${this.currentId++}`}}var X=e=>{const t=pe.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,l=!1;if(n){const s=r.inject(mn,null);typeof s!="undefined"&&s!==null&&(a=s)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const s=o!=null?o:t.getId();a=t.create(s,e),n&&(l=!0)}else e&&a.setState(e);if(!a)throw new Error("[vueflow]: store instance not found.");return n&&(r.provide(mn,a),n.vueFlowId=a.id,l&&Xe(()=>{t.get(a.id)&&a.$destroy(),a=null})),a};const en=(e,t,n,o,i,a,l,s,u)=>{var x,g;const c=l.elementFromPoint(e.clientX,e.clientY),d=(c==null?void 0:c.classList.contains("target"))||!1,v=(c==null?void 0:c.classList.contains("source"))||!1,f={elementBelow:c,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(d||v)&&(f.isHoveringHandle=!0,t===_e.Strict?n&&v||!n&&d:!0)){const h=(x=c.getAttribute("data-nodeid"))!=null?x:"",_=(g=c.getAttribute("data-handleid"))!=null?g:"",R=n?h:o,C=n?_:i,y=n?o:h,N={source:R,sourceHandle:C,target:y,targetHandle:n?i:_};f.connection=N,f.isValid=a(N,{edges:s,sourceNode:u(R),targetNode:u(y)})||!f.connection.target||!f.connection.source}return f},No=e=>{e==null||e.classList.remove("vue-flow__handle-valid"),e==null||e.classList.remove("vue-flow__handle-connecting")};var Dn=()=>{const e=X(),t=r.toRef(e,"edges"),n=r.toRef(e,"connectOnClick"),o=r.toRef(e,"nodesConnectable"),i=r.toRef(e,"connectionStartHandle"),a=r.toRef(e,"connectionPosition"),l=r.toRef(e,"connectionMode"),s=r.toRef(e,"emits"),u=r.toRef(e,"setState"),c=r.toRef(e,"getNode");let d;return{onMouseDown:(x,g,m,h,_,R,C,y)=>{var k;const $=x.target.closest(".vue-flow"),N=vo(x.target);if(!N)return;let T=_!=null?_:()=>!0;const F=c.value(m);if(F&&(typeof F.connectable=="undefined"?o.value:F.connectable)===!1)return;_||F&&(T=(k=h?F.isValidSourcePos:F.isValidTargetPos)!=null?k:()=>!0);const A=N.elementFromPoint(x.clientX,x.clientY),G=A==null?void 0:A.classList.contains("target"),L=A==null?void 0:A.classList.contains("source");if(!$||!G&&!L&&!R)return;const W=R!=null?R:G?"target":"source",I=$.getBoundingClientRect();u.value({connectionPosition:{x:x.clientX-I.left,y:x.clientY-I.top},connectionNodeId:m,connectionHandleId:g,connectionHandleType:W}),s.value.connectStart({event:x,nodeId:m,handleId:g,handleType:W});function w(O){a.value.x=O.clientX-I.left,a.value.y=O.clientY-I.top;const{connection:b,elementBelow:M,isValid:p,isHoveringHandle:E}=en(O,l.value,h,m,g,T,N,t.value,c.value);if(!E)return No(d);!(b.source===b.target)&&M&&(d=M,M.classList.add("vue-flow__handle-connecting"),M.classList.toggle("vue-flow__handle-valid",p))}function z(O){const{connection:b,isValid:M}=en(O,l.value,h,m,g,T,N,t.value,c.value);s.value.connectStop(O);const p=b.source===b.target;M&&!p&&(C?C(b):s.value.connect(b)),s.value.connectEnd(O),R&&(y==null||y()),No(d),u.value({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null,connectionPosition:{x:NaN,y:NaN}}),N.removeEventListener("mousemove",w),N.removeEventListener("mouseup",z)}N.addEventListener("mousemove",w),N.addEventListener("mouseup",z)},onClick:(x,g,m,h,_)=>{var R;if(!!n.value)if(!i.value)s.value.connectStart({event:x,nodeId:m,handleId:g,handleType:h}),u.value({connectionStartHandle:{nodeId:m,type:h,handleId:g}});else{let C=_!=null?_:()=>!0;const y=c.value(m);if(y&&(typeof y.connectable=="undefined"?o.value:y.connectable)===!1)return;_||y&&(C=(R=h!=="target"?y.isValidTargetPos:y.isValidSourcePos)!=null?R:()=>!0);const $=vo(x.target),{connection:N,isValid:T}=en(x,l.value,i.value.type==="target",i.value.nodeId,i.value.handleId||null,C,$,t.value,c.value),F=N.source===N.target;s.value.connectStop(x),T&&!F&&s.value.connect(N),s.value.connectEnd(x),u.value({connectionStartHandle:null})}}}},Re=()=>typeof window!="undefined"?window:{chrome:!1};function Eo(e){const t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}var Ae=(e,t)=>{const n=Re();let o=r.ref(!1);return r.watch(o,()=>{t&&typeof t=="function"&&t(o.value)}),Un(r.unref(e),i=>{Eo(i)||(i.preventDefault(),o.value=!0)},{eventName:"keydown"}),Un(r.unref(e),i=>{Eo(i)||(i.preventDefault(),o.value=!1)},{eventName:"keyup"}),typeof n.addEventListener!="undefined"&&re(n,"blur",()=>{o.value=!1}),t&&typeof t=="function"&&t(o.value),o};const tn=.1,nn=(e,t=0)=>e.transition().duration(t),Ne=async(e,t)=>{const n=Re();return"screen"in n&&(await Ve(e).toMatch(({height:o,width:i})=>!isNaN(i)&&i>0&&!isNaN(o)&&o>0),t.length>0&&await Ve(t).toMatch(o=>!!o.filter(({dimensions:{width:i,height:a}})=>!isNaN(i)&&i>0&&!isNaN(a)&&a>0).length)),!0};var yi=e=>{const t=X({id:e}),n=r.toRef(t,"onPaneReady"),o=r.toRef(t,"nodes"),i=r.toRef(t,"d3Zoom"),a=r.toRef(t,"d3Selection"),l=r.toRef(t,"dimensions"),s=r.toRef(t,"translateExtent"),u=r.toRef(t,"minZoom"),c=r.toRef(t,"maxZoom"),d=r.toRef(t,"viewport"),v=r.toRef(t,"snapToGrid"),f=r.toRef(t,"snapGrid"),x=r.toRef(t,"getNodes");let g=r.ref(!1);n.value(()=>g.value=!0);const m=async(y,$)=>{g.value||await Ne(l.value,x.value),a.value&&i.value&&i.value.scaleTo(nn(a.value,$==null?void 0:$.duration),y)},h=async(y,$)=>{g.value||await Ne(l.value,x.value),a.value&&i.value&&i.value.scaleBy(nn(a.value,$),y)},_=async y=>{await h(1.2,y==null?void 0:y.duration)},R=async y=>{await h(1/1.2,y==null?void 0:y.duration)},C=(y,$,N,T)=>{const{x:F,y:A}=Ge({x:-y,y:-$},s.value),G=Mt.translate(-F,-A).scale(N);a.value&&i.value&&i.value.transform(nn(a.value,T),G)};return{zoomIn:_,zoomOut:R,zoomTo:m,setTransform:async(y,$)=>{g.value||await Ne(l.value,x.value),C(y.x,y.y,y.zoom,$==null?void 0:$.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:async(y={padding:tn,includeHiddenNodes:!1,duration:0})=>{var G,L,W;if(g.value||await Ne(l.value,x.value),!x.value.length)return;let $=[];y.nodes&&($=o.value.filter(I=>{var w;return(w=y.nodes)==null?void 0:w.includes(I.id)})),(!$||!$.length)&&($=y.includeHiddenNodes?$:x.value);const N=Ot($),{x:T,y:F,zoom:A}=gn(N,l.value.width,l.value.height,(G=y.minZoom)!=null?G:u.value,(L=y.maxZoom)!=null?L:c.value,(W=y.padding)!=null?W:tn,y.offset);C(T,F,A,y==null?void 0:y.duration)},setCenter:async(y,$,N)=>{g.value||await Ne(l.value,x.value);const T=typeof(N==null?void 0:N.zoom)!="undefined"?N.zoom:c.value,F=l.value.width/2-y*T,A=l.value.height/2-$*T;C(F,A,T,N==null?void 0:N.duration)},fitBounds:async(y,$={padding:tn})=>{g.value||await Ne(l.value,x.value);const{x:N,y:T,zoom:F}=gn(y,l.value.width,l.value.height,u.value,c.value,$.padding);C(N,T,F,$==null?void 0:$.duration)},project:y=>Tn(y,d.value,v.value,f.value)}};function wi(e){const t=r.effectScope(),n=t.run(()=>{const o=X(),i=r.toRef(o,"viewport"),a=r.toRef(o,"snapToGrid"),l=r.toRef(o,"snapGrid"),s=r.toRef(o,"noDragClassName"),u=r.toRef(o,"nodes"),c=r.toRef(o,"nodeExtent"),d=r.toRef(o,"getNode"),v=r.toRef(o,"multiSelectionActive"),f=r.toRef(o,"nodesSelectionActive"),x=r.toRef(o,"selectNodesOnDrag"),g=r.toRef(o,"removeSelectedElements"),m=r.toRef(o,"addSelectedNodes"),h=r.toRef(o,"updateNodePositions"),_=e,R=r.toRef(_,"onStart"),C=r.toRef(_,"onDrag"),y=r.toRef(_,"onStop"),$=r.toRef(_,"el"),N=r.toRef(_,"disabled",!1),T=r.toRef(_,"id"),F=r.ref(!1);let A=r.ref(),G=r.ref({x:void 0,y:void 0}),L=r.ref();const W=w=>(w!=null?w:a.value)?l.value:void 0,I=(w,z)=>{const k=w.sourceEvent.touches?w.sourceEvent.touches[0].clientX:w.sourceEvent.clientX,O=w.sourceEvent.touches?w.sourceEvent.touches[0].clientY:w.sourceEvent.clientY;return Tn({x:k,y:O},i.value,!!z,z!=null?z:l.value)};return r.watch([()=>N.value,()=>$.value],()=>{if($.value){const w=te($.value),z=T.value?d.value(T.value):void 0;N.value?w.on(".drag",null):(L.value=Pa().on("start",k=>{!x.value&&!v.value&&T.value&&(z!=null&&z.selected||g.value()),z&&!N.value&&x.value&&ci(z,v.value,m.value,g.value,f);const O=I(k,W(z==null?void 0:z.snapGrid));if(A.value=Ws(u.value,O,d.value,T.value),R.value&&A.value){const[b,M]=Wt({id:T.value,dragItems:A.value,getNode:d});R.value(k.sourceEvent,b,M)}}).on("drag",k=>{const O=I(k,W(z==null?void 0:z.snapGrid));if((G.value.x!==O.x||G.value.y!==O.y)&&A.value&&(G.value=O,A.value=A.value.map(b=>Gs(b,O,b.parentNode?d.value(b.parentNode):void 0,c.value)),h.value(A.value,!0,!0),F.value=!0,C.value)){const[b,M]=Wt({id:T.value,dragItems:A.value,getNode:d});C.value(k.sourceEvent,b,M)}k.on("end",b=>{if(F.value=!1,y.value&&A.value){h.value(A.value,!1,!1);const[M,p]=Wt({id:T.value,dragItems:A.value,getNode:d});y.value(b.sourceEvent,M,p)}})}).filter(k=>{const O=k.target;return!k.button&&(!s.value||!_o(O,`.${s.value}`,$)&&(!(z!=null&&z.dragHandle)||_o(O,z.dragHandle,$)))}),w.call(L.value))}},{flush:"post"}),F});return Xe(()=>t.stop()),n}const yu=()=>({doubleClick:Z(),click:Z(),mouseEnter:Z(),mouseMove:Z(),mouseLeave:Z(),contextMenu:Z(),dragStart:Z(),drag:Z(),dragStop:Z()});function wu(e,t){const n=yu();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const xu=()=>({doubleClick:Z(),click:Z(),mouseEnter:Z(),mouseMove:Z(),mouseLeave:Z(),contextMenu:Z(),updateStart:Z(),update:Z(),updateEnd:Z()});function _u(e,t){const n=xu();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const bu={name:"SelectionPane",inheritAttrs:!1},ku=r.defineComponent({...bu,setup(e){const{id:t,deleteKeyCode:n,selectionKeyCode:o,multiSelectionKeyCode:i,emits:a,nodesSelectionActive:l,userSelectionActive:s,multiSelectionActive:u,elementsSelectable:c,getNodes:d,getSelectedEdges:v,removeSelectedElements:f,removeNodes:x,removeEdges:g}=X(),m=N=>{a.paneClick(N),l.value=!1,f()},h=N=>a.paneContextMenu(N),_=N=>a.paneScroll(N),R=N=>a.paneMouseEnter(N),C=N=>a.paneMouseLeave(N),y=N=>a.paneMouseMove(N);Ae(n,N=>{if(!N)return;const T=d.value.reduce((F,A)=>((!A.selected&&A.parentNode&&F.find(G=>G.id===A.parentNode)||A.selected)&&F.push(A),F),[]);(T||v.value)&&(v.value.length>0&&g(v.value),T.length>0&&x(T),l.value=!1,f())}),Ae(i,N=>{u.value=N});const $=Ae(o,N=>{s.value&&N||(s.value=N&&c.value)});return(N,T)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.unref($)?(r.openBlock(),r.createBlock(r.unref(hu),{key:`user-selection-${r.unref(t)}`})):r.createCommentVNode("",!0),r.unref(l)?(r.openBlock(),r.createBlock(r.unref(su),{key:`nodes-selection-${r.unref(t)}`})):r.createCommentVNode("",!0),(r.openBlock(),r.createElementBlock("div",{key:`pane-${r.unref(t)}`,class:"vue-flow__pane vue-flow__container",onClick:m,onContextmenu:h,onWheel:_,onMouseenter:R,onMousemove:y,onMouseleave:C},null,32))],64))}}),Nu={class:"vue-flow__nodes vue-flow__container"},Eu={name:"Nodes"},Su=r.defineComponent({...Eu,setup(e){const t=r.inject(Bt),n=X(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"elementsSelectable"),a=r.toRef(n,"nodesConnectable");r.toRef(n,"noPanClassName"),r.toRef(n,"snapToGrid"),r.toRef(n,"snapGrid"),r.toRef(n,"getNode");const l=r.toRef(n,"getNodes"),s=r.toRef(n,"getNodeTypes"),u=f=>typeof f=="undefined"?o.value:f,c=f=>typeof f=="undefined"?i.value:f,d=f=>typeof f=="undefined"?a.value:f,v=(f,x)=>{const g=f||"default";let m=x!=null?x:s.value[g];const h=r.getCurrentInstance();if(typeof m=="string"&&h){const R=Object.keys(h.appContext.components);R&&R.includes(g)&&(m=r.resolveComponent(g,!1))}if(typeof m!="string")return m;const _=t==null?void 0:t[`node-${g}`];return _!=null&&_({})?_:(console.warn(`[vueflow]: Node type "${f}" not found and no node-slot detected. Using fallback type "default".`),!1)};return(f,x)=>(r.openBlock(),r.createElementBlock("div",Nu,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(l.value,g=>(r.openBlock(),r.createBlock(r.unref(Xs),{id:g.id,key:g.id,type:v(g.type,g.template),name:g.type||"default",draggable:u(g.draggable),selectable:c(g.selectable),connectable:d(g.connectable),node:g},null,8,["id","type","name","draggable","selectable","connectable","node"]))),128))]))}}),Cu=["id","markerWidth","markerHeight","markerUnits","orient"],$u=["stroke","stroke-width","fill"],Mu=["stroke","stroke-width"],Bu={name:"MarkerType"},Ru=r.defineComponent({...Bu,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type==="arrowclosed"?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,$u)):r.createCommentVNode("",!0),e.type==="arrow"?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Mu)):r.createCommentVNode("",!0)],8,Cu))}}),zu={name:"MarkerDefinitions"},Ou=r.defineComponent({...zu,setup(e){const t=X(),n=r.toRef(t,"edges"),o=r.toRef(t,"connectionLineOptions"),i=r.toRef(t,"defaultMarkerColor"),a=r.computed(()=>{const l=[],s=[],u=c=>{if(c){const d=ve(c);l.includes(d)||(typeof c=="object"?s.push({...c,id:d,color:c.color||i.value}):s.push({id:d,color:i.value,type:c}),l.push(d))}};return[o.value.markerEnd,o.value.markerStart].forEach(u),n.value.reduce((c,d)=>([d.markerStart,d.markerEnd].forEach(u),c.sort((v,f)=>v.id.localeCompare(f.id))),s),s});return(l,s)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(a),u=>(r.openBlock(),r.createBlock(Ru,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Pu={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Tu={name:"Edges"},Iu=r.defineComponent({...Tu,setup(e){const t=r.inject(Bt),n=X(),o=r.toRef(n,"emits"),i=r.toRef(n,"connectionMode"),a=r.toRef(n,"edgeUpdaterRadius"),l=r.toRef(n,"onPaneReady"),s=r.toRef(n,"connectionNodeId"),u=r.toRef(n,"nodesConnectable"),c=r.toRef(n,"connectionHandleType"),d=r.toRef(n,"edgesUpdatable"),v=r.toRef(n,"elementsSelectable"),f=r.toRef(n,"getSelectedNodes"),x=r.toRef(n,"nodesSelectionActive"),g=r.toRef(n,"getNode");r.toRef(n,"getNodes");const m=r.toRef(n,"getEdges"),h=r.toRef(n,"getEdgeTypes"),_=r.toRef(n,"addSelectedEdges"),R=r.toRef(n,"noPanClassName"),C=r.toRef(n,"elevateEdgesOnSelect"),y=S=>typeof S=="undefined"?v.value:S,$=S=>typeof S=="undefined"?d.value:S,N=r.ref(),T=ct(s,()=>s.value?g.value(s.value):!1),F=ct(s,()=>!!(T.value&&(typeof T.value.connectable=="undefined"?u.value:T.value.connectable)&&s.value&&c.value)),A=r.ref({});let G=r.ref([]),L=r.effectScope();l.value(()=>{L||(L=r.effectScope()),L.run(()=>{const S=r.computed(()=>m.value.length);r.watch([f,S],()=>{m.value.forEach(P=>{A.value[P.id]||(A.value[P.id]=_u(P,o.value))}),C.value?r.nextTick(()=>G.value=Ds(m.value,g.value)):G.value=[{isMaxLevel:!0,edges:m.value,level:0}]},{immediate:!0})})}),r.onBeforeUnmount(()=>{L==null||L.stop(),L=null});const W=(S,P)=>{const K=S||"default";let H=P!=null?P:h.value[K];const q=r.getCurrentInstance();if(typeof H=="string"&&q){const me=Object.keys(q.appContext.components);me&&me.includes(K)&&(H=r.resolveComponent(K,!1))}if(H&&typeof H!="string")return H;const Q=t==null?void 0:t[`edge-${K}`];return Q!=null&&Q({})?Q:(console.warn(`[vueflow]: Edge type "${S}" not found and no edge-slot detected. Using fallback type "default".`),!1)},I=(S,P)=>{const K={event:S,edge:P};y(P.selectable)&&(x.value=!1,_.value([P])),A.value[P.id].emit.click(K)},w=(S,P)=>A.value[P.id].emit.contextMenu({event:S,edge:P}),z=(S,P)=>A.value[P.id].emit.doubleClick({event:S,edge:P}),k=(S,P)=>A.value[P.id].emit.mouseEnter({event:S,edge:P}),O=(S,P)=>A.value[P.id].emit.mouseMove({event:S,edge:P}),b=(S,P)=>A.value[P.id].emit.mouseLeave({event:S,edge:P}),M=(S,P)=>{N.value=P.id,V(S,P,!0)},p=(S,P)=>{N.value=P.id,V(S,P,!1)},{onMouseDown:E}=Dn(),V=(S,P,K)=>{var Q;const H=K?P.target:P.source,q=(Q=K?P.targetHandle:P.sourceHandle)!=null?Q:"";A.value[P.id].emit.updateStart({event:S,edge:P}),E(S,q,H,K,void 0,K?"target":"source",me=>{Pn(me,m.value)||A.value[P.id].emit.update({edge:P,connection:me})},()=>{A.value[P.id].emit.updateEnd({event:S,edge:P}),N.value=""})},D=S=>{const P=S.class instanceof Function?S.class(S):S.class;return[R.value,P]},B=S=>S.style instanceof Function?S.style(S):S.style;return(S,P)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(G.value,K=>(r.openBlock(),r.createElementBlock("svg",{key:K.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${K.level}`)},[K.isMaxLevel?(r.openBlock(),r.createBlock(Ou,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(K.edges,H=>(r.openBlock(),r.createBlock(r.unref(nu),{id:H.id,key:H.id,type:W(H.type,H.template),name:H.type||"default",source:H.source,target:H.target,"target-handle-id":H.targetHandle,"source-handle-id":H.sourceHandle,"source-node":g.value(H.source),"target-node":g.value(H.target),label:H.label,data:H.data,events:{...H.events,...A.value[H.id].on},animated:H.animated,selectable:y(H.selectable),selected:H.selected,updatable:$(H.updatable),updating:H.id===N.value,"label-style":H.labelStyle,"label-show-bg":H.labelShowBg,"label-bg-style":H.labelBgStyle,"label-bg-padding":H.labelBgPadding,"label-bg-border-radius":H.labelBgBorderRadius,"connection-mode":i.value,"edge-updater-radius":a.value,"marker-end":H.markerEnd,"marker-start":H.markerStart,style:r.normalizeStyle(B(H)),class:r.normalizeClass(D(H)),onClick:q=>I(q,H),onDblclick:q=>z(q,H),onContextmenu:q=>w(q,H),onMouseenter:q=>k(q,H),onMousemove:q=>O(q,H),onMouseleave:q=>b(q,H),onSourceMousedown:q=>M(q,H),onTargetMousedown:q=>p(q,H)},null,8,["id","type","name","source","target","target-handle-id","source-handle-id","source-node","target-node","label","data","events","animated","selectable","selected","updatable","updating","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","connection-mode","edge-updater-radius","marker-end","marker-start","style","class","onClick","onDblclick","onContextmenu","onMouseenter","onMousemove","onMouseleave","onSourceMousedown","onTargetMousedown"]))),128))])],4))),128)),F.value&&!!T.value?(r.openBlock(),r.createElementBlock("svg",Pu,[r.createVNode(au,{"source-node":T.value},null,8,["source-node"])])):r.createCommentVNode("",!0)],64))}}),Au={name:"Transform"},Vu=r.defineComponent({...Au,setup(e){const{id:t,viewport:n,dimensions:o,fitViewOnInit:i,emits:a,fitView:l,...s}=X(),u=async d=>{const v=Re();return"screen"in v&&await Ve(d).toMatch(({height:f,width:x})=>!isNaN(x)&&x>0&&!isNaN(f)&&f>0),!0};let c=r.ref(!1);return r.onMounted(async()=>{await u(o.value),c.value=!0,a.paneReady({id:t,viewport:n,dimensions:o,fitViewOnInit:i,fitView:l,emits:a,...s}),i!=null&&i.value&&l()}),(d,v)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:c.value?void 0:0})},[r.createVNode(Iu),r.createVNode(Su),r.renderSlot(d.$slots,"default")],4))}}),Du={name:"Viewport"},Hu=r.defineComponent({...Du,setup(e){const t=X(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultZoom"),l=r.toRef(t,"defaultPosition"),s=r.toRef(t,"translateExtent"),u=r.toRef(t,"dimensions"),c=r.toRef(t,"zoomActivationKeyCode"),d=r.toRef(t,"selectionKeyCode"),v=r.toRef(t,"panOnScroll"),f=r.toRef(t,"panOnScrollMode"),x=r.toRef(t,"panOnScrollSpeed"),g=r.toRef(t,"panOnDrag"),m=r.toRef(t,"zoomOnDoubleClick"),h=r.toRef(t,"zoomOnPinch"),_=r.toRef(t,"zoomOnScroll"),R=r.toRef(t,"preventScrolling"),C=r.toRef(t,"noWheelClassName"),y=r.toRef(t,"noPanClassName"),$=r.toRef(t,"setState"),N=r.toRef(t,"emits"),T=_n("viewport",null);let F=r.ref(!1);const A=(b,M)=>b.x!==M.x&&!isNaN(M.x)||b.y!==M.y&&!isNaN(M.y)||b.zoom!==M.k&&!isNaN(M.k),G=b=>({x:b.x,y:b.y,zoom:b.k}),L=(b,M)=>b.target.closest(`.${M}`),W=wt(a.value,o.value,i.value);let I=r.ref({...Ge({x:l.value[0],y:l.value[1]},s.value),zoom:W});const{width:w,height:z}=Li(T),k=r.watch([w,z],([b,M])=>{u.value.width=b,u.value.height=M},{immediate:!0}),O=Re();return"screen"in O&&re(O,"resize",()=>{if(!T.value)return;const{width:b,height:M}=zn(T.value);u.value.width=b,u.value.height=M}),r.onBeforeUnmount(k),r.onMounted(()=>{const b=Ns().scaleExtent([o.value,i.value]).translateExtent(s.value),M=te(T.value).call(b),p=M.on("wheel.zoom"),E=Mt.translate(I.value.x,I.value.y).scale(I.value.zoom);b.transform(M,E),$.value({d3Zoom:b,d3Selection:M,d3ZoomHandler:p,viewport:{x:E.x,y:E.y,zoom:E.k},viewportRef:T.value});const V=Ae(d.value,B=>{B&&!F.value?b.on("zoom",null):B||b.on("zoom",S=>{$.value({viewport:{x:S.transform.x,y:S.transform.y,zoom:S.transform.k}});const P=G(S.transform);N.value.move({event:S,flowTransform:P})})}),D=Ae(c.value);b.on("start",B=>{F.value=!0;const S=G(B.transform);I.value=S,N.value.moveStart({event:B,flowTransform:S})}),b.on("end",B=>{if(F.value=!1,A(I.value,B.transform)){const S=G(B.transform);I.value=S,N.value.moveEnd({event:B,flowTransform:S})}}),r.watchEffect(()=>{v.value&&!D.value?M.on("wheel",B=>{var q;if(L(B,(q=C.value)==null?void 0:q.value))return!1;B.preventDefault(),B.stopImmediatePropagation();const S=M.property("__zoom").k||1;if(B.ctrlKey&&h.value){const Q=ie(B),me=-B.deltaY*(B.deltaMode===1?.05:B.deltaMode?1:.002)*10,xi=S*2**me;b.scaleTo(M,xi,Q);return}const P=B.deltaMode===1?20:1,K=f.value===Ue.Vertical?0:B.deltaX*P,H=f.value===Ue.Horizontal?0:B.deltaY*P;b.translateBy(M,-(K/S)*x.value,-(H/S)*x.value)}).on("wheel.zoom",null):typeof p!="undefined"&&M.on("wheel",B=>{var S;if(!R.value||L(B,(S=C.value)==null?void 0:S.value))return null;B.preventDefault()}).on("wheel.zoom",p)}),b.filter(B=>{const S=D.value||_.value,P=h.value&&B.ctrlKey;return!g.value&&!S&&!v.value&&!m.value&&!h.value||V.value||!m.value&&B.type==="dblclick"||L(B,C.value)&&B.type==="wheel"||L(B,y.value)&&B.type!=="wheel"||!h.value&&B.ctrlKey&&B.type==="wheel"||!S&&!v.value&&!P&&B.type==="wheel"||!g.value&&(B.type==="mousedown"||B.type==="touchstart")?!1:(!B.ctrlKey||B.type==="wheel")&&!B.button})}),(b,M)=>(r.openBlock(),r.createElementBlock("div",{ref:"viewport",key:`viewport-${n.value}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(Vu,null,{default:r.withCtx(()=>[r.renderSlot(b.$slots,"default")]),_:3}),r.createVNode(ku)]))}}),j=e=>typeof r.unref(e)!="undefined";var Lu=(e,t,n)=>{const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let g,m;g=ke([e.modelValue,()=>{var h,_;return(_=(h=e.modelValue)==null?void 0:h.value)==null?void 0:_.length}],([h])=>{h&&Array.isArray(h)&&(m&&m.pause(),g&&g.pause(),n.setElements(h),m=ke([n.edges,n.nodes,()=>n.edges.value.length,()=>n.nodes.value.length],([_,R])=>{g&&g.pause();const C=[...R,..._];C.length&&(e.modelValue.value=C),r.nextTick(()=>{g&&g.resume()})},{immediate:!0}),r.nextTick(()=>{m&&m.resume(),g&&g.resume()}))},{immediate:!!(e.modelValue&&e.modelValue.value)})})},()=>{o.run(()=>{let g,m;g=ke([e.nodes,()=>{var h,_;return(_=(h=e.nodes)==null?void 0:h.value)==null?void 0:_.length}],async([h])=>{h&&Array.isArray(h)&&(m&&m.pause(),g&&g.pause(),n.setNodes(h),m=ke(()=>n.nodes.value.length,()=>{n.nodes.value.length&&(e.nodes.value=[...n.nodes.value])},{immediate:!0}),r.nextTick(()=>{m&&m.resume(),g&&g.resume()}))},{immediate:!!(e.nodes&&e.nodes.value)})})},()=>{o.run(()=>{let g,m;g=ke([e.edges,()=>{var h,_;return(_=(h=e.edges)==null?void 0:h.value)==null?void 0:_.length}],async([h])=>{h&&Array.isArray(h)&&(m&&m.pause(),g&&g.pause(),n.setEdges(h),m=ke(()=>n.edges.value.length,()=>{n.edges.value.length&&(e.edges.value=[...n.edges.value])},{immediate:!0}),r.nextTick(()=>{m&&m.resume(),g&&g.resume()}))},{immediate:!!(e.edges&&e.edges.value)})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&j(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:j(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&j(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:j(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&j(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:j(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&j(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:j(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{j(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:j(t.applyDefault)}),r.watch(n.applyDefault,(g,m,h)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),h(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const g=async m=>{let h=m;on(t.autoConnect)&&(h=await t.autoConnect(m)),h!==!1&&n.addEdges([h])};r.watch(()=>t.autoConnect,()=>{j(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:j(t.autoConnect)}),r.watch(n.autoConnect,(m,h,_)=>{m?n.onConnect(g):n.hooks.value.connect.off(g),_(()=>{n.hooks.value.connect.off(g)})},{immediate:!0})})},()=>{const g=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(m=>{if(!g.includes(m)){const h=r.toRef(t,m),_=n[m];o.run(()=>{r.watch(h,()=>{j(h)&&(_.value=h.value)},{immediate:j(h)})})}})}].forEach(g=>g())}),()=>o.stop()};const Fu={name:"VueFlow"},Zu=r.defineComponent({...Fu,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:null,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultZoom:null,defaultPosition:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectStop","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=rt(o,"modelValue",n),a=rt(o,"nodes",n),l=rt(o,"edges",n),{vueFlowRef:s,id:u,hooks:c,getNodeTypes:d,getEdgeTypes:v,$reset:f,...x}=X({id:o.id}),g=Lu({modelValue:i,nodes:a,edges:l},o,{vueFlowRef:s,id:u,hooks:c,getNodeTypes:d,getEdgeTypes:v,$reset:f,...x}),m=r.ref();return r.onUnmounted(()=>{g()}),r.onMounted(()=>{s.value=m.value}),Ss(n,c),r.provide(Bt,r.useSlots()),t({vueFlowRef:s,id:u,hooks:c,getNodeTypes:d,getEdgeTypes:v,$reset:f,...x}),(h,_)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:m,class:"vue-flow"},[r.createVNode(Hu,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),R=>r.renderSlot(h.$slots,`node-${R}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(v)),R=>r.renderSlot(h.$slots,`edge-${R}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(h.$slots,"connection-line")]),default:r.withCtx(()=>[r.renderSlot(h.$slots,"zoom-pane")]),_:3}),r.renderSlot(h.$slots,"default")],512))}}),Vt=function({position:{x:e,y:t},dimensions:{height:n,width:o},strokeWidth:i,strokeColor:a,borderRadius:l,color:s,shapeRendering:u="geometricPrecision"},{attrs:c,emit:d,slots:v}){var x,g;const f=(x=c.style)!=null?x:{};return[r.h("rect",{class:["vue-flow__minimap-node",c.class].join(" "),style:f,x:e,y:t,rx:l,ry:l,width:o,height:n,fill:s||f.background||f.backgroundColor,stroke:a,strokeWidth:i,shapeRendering:u,onClick:m=>d("click",m),onDblClick:m=>d("dblclick",m),onMouseenter:m=>d("mouseenter",m),onMousemove:m=>d("mousemove",m),onMouseleave:m=>d("mouseleave",m)}),(g=v==null?void 0:v.default)==null?void 0:g.call(v)]};Vt.props=["position","dimensions","strokeWidth","strokeColor","borderRadius","color","shapeRendering"];Vt.emits=["click","dblclick","mouseenter","mousemove","mouseleave"];const Uu=["width","height","viewBox"],Wu=["d","fill"],Gu={name:"MiniMap"},Ku=r.defineComponent({...Gu,props:{nodeColor:{type:[String,Function],default:"#fff"},nodeStrokeColor:{type:[String,Function],default:"#555"},nodeClassName:null,nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 242, 243, 0.7)"},width:null,height:null},emits:["nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=r.useAttrs(),o=Re(),i=200,a=150,l=X(),s=r.toRef(l,"edges"),u=r.toRef(l,"viewport"),c=r.toRef(l,"dimensions"),d=r.toRef(l,"emits"),v=r.toRef(l,"getNodes"),f=r.computed(()=>{var L,W,I;return(I=(W=e.width)!=null?W:(L=n.style)==null?void 0:L.width)!=null?I:i}),x=r.computed(()=>{var L,W,I;return(I=(W=e.height)!=null?W:(L=n.style)==null?void 0:L.height)!=null?I:a}),g=e.nodeColor instanceof Function?e.nodeColor:()=>e.nodeColor,m=e.nodeStrokeColor instanceof Function?e.nodeStrokeColor:()=>e.nodeStrokeColor,h=e.nodeClassName instanceof Function?e.nodeClassName:()=>e.nodeClassName,_=typeof o=="undefined"||!!o.chrome?"crispEdges":"geometricPrecision",R=r.computed(()=>Ot(v.value)),C=r.computed(()=>({x:-u.value.x/u.value.zoom,y:-u.value.y/u.value.zoom,width:c.value.width/u.value.zoom,height:c.value.height/u.value.zoom})),y=ct(C,()=>{const L=v.value&&v.value.length?Ps(R.value,C.value):C.value,W=L.width/f.value,I=L.height/x.value,w=Math.max(W,I),z=w*f.value,k=w*x.value,O=5*w;return{offset:O,x:L.x-(z-L.width)/2-O,y:L.y-(k-L.height)/2-O,width:z+O*2,height:k+O*2}}),$=ct(y,()=>y.value.x&&y.value.y?`
    M${y.value.x-y.value.offset},${y.value.y-y.value.offset}
    h${y.value.width+y.value.offset*2}
    v${y.value.height+y.value.offset*2}
    h${-y.value.width-y.value.offset*2}z
    M${C.value.x},${C.value.y}
    h${C.value.width}
    v${C.value.height}
    h${-C.value.width}z`:""),N=(L,W)=>{const I={event:L,node:W,connectedEdges:Y([W],s.value)};d.value.miniMapNodeClick(I),t("nodeClick",I)},T=(L,W)=>{const I={event:L,node:W,connectedEdges:Y([W],s.value)};d.value.miniMapNodeDoubleClick(I),t("nodeDblclick",I)},F=(L,W)=>{const I={event:L,node:W,connectedEdges:Y([W],s.value)};d.value.miniMapNodeMouseEnter(I),t("nodeMouseenter",I)},A=(L,W)=>{const I={event:L,node:W,connectedEdges:Y([W],s.value)};d.value.miniMapNodeMouseMove(I),t("nodeMousemove",I)},G=(L,W)=>{const I={event:L,node:W,connectedEdges:Y([W],s.value)};d.value.miniMapNodeMouseLeave(I),t("nodeMouseleave",I)};return(L,W)=>(r.openBlock(),r.createElementBlock("svg",{width:f.value,height:x.value,viewBox:[y.value.x,y.value.y,y.value.width,y.value.height].join(" "),class:"vue-flow__minimap"},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(v.value,I=>(r.openBlock(),r.createBlock(r.unref(Vt),{id:I.id,key:I.id,position:I.computedPosition,dimensions:I.dimensions,style:r.normalizeStyle(I.style),class:r.normalizeClass(r.unref(h)(I)),color:r.unref(g)(I),"border-radius":e.nodeBorderRadius,"stroke-color":r.unref(m)(I),"stroke-width":e.nodeStrokeWidth,"shape-rendering":r.unref(_),onClick:w=>N(w,I),onDblclick:w=>T(w,I),onMouseenter:w=>F(w,I),onMousemove:w=>A(w,I),onMouseleave:w=>G(w,I)},{default:r.withCtx(()=>[r.renderSlot(L.$slots,`node-${I.type}`,{id:I.id,parentNode:I.parentNode,selected:I.selected,position:I.computedPosition,dimensions:I.dimensions,style:r.normalizeStyle(I.style),class:r.normalizeClass(r.unref(h)(I)),color:r.unref(g)(I),borderRadius:e.nodeBorderRadius,strokeColor:r.unref(m)(I),strokeWidth:e.nodeStrokeWidth,shapeRendering:r.unref(_)})]),_:2},1032,["id","position","dimensions","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),r.createElementVNode("path",{class:"vue-flow__minimap-mask",d:r.unref($),fill:e.maskColor,"fill-rule":"evenodd"},null,8,Wu)],8,Uu))}});var qu=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const Xu={name:"ControlButton"},Qu={class:"vue-flow__controls-button"};function ju(e,t,n,o,i,a){return r.openBlock(),r.createElementBlock("button",Qu,[r.renderSlot(e.$slots,"default")])}var Ie=qu(Xu,[["render",ju]]);const Yu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ju=r.createElementVNode("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),ec=[Ju];function tc(e,t){return r.openBlock(),r.createElementBlock("svg",Yu,ec)}var nc={render:tc};const oc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ic=r.createElementVNode("path",{d:"M0 0h32v4.2H0z"},null,-1),rc=[ic];function ac(e,t){return r.openBlock(),r.createElementBlock("svg",oc,rc)}var lc={render:ac};const sc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},uc=r.createElementVNode("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),cc=[uc];function dc(e,t){return r.openBlock(),r.createElementBlock("svg",sc,cc)}var fc={render:dc};const hc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},vc=r.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),mc=[vc];function gc(e,t){return r.openBlock(),r.createElementBlock("svg",hc,mc)}var pc={render:gc};const yc={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},wc=r.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),xc=[wc];function _c(e,t){return r.openBlock(),r.createElementBlock("svg",yc,xc)}var bc={render:_c};const kc={class:"vue-flow__controls"},Nc={name:"Controls"},Ec=r.defineComponent({...Nc,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=X(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"setInteractive"),s=r.toRef(n,"zoomIn"),u=r.toRef(n,"zoomOut"),c=r.toRef(n,"fitView"),d=r.computed(()=>o.value&&i.value&&a.value),v=()=>{s.value(),t("zoomIn")},f=()=>{u.value(),t("zoomOut")},x=()=>{c.value(e.fitViewParams),t("fitView")},g=()=>{l.value(!d.value),t("interactionChange",!d.value)};return(m,h)=>(r.openBlock(),r.createElementBlock("div",kc,[r.renderSlot(m.$slots,"top"),e.showZoom?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[r.renderSlot(m.$slots,"control-zoom-in",{},()=>[r.createVNode(Ie,{class:"vue-flow__controls-zoomin",onClick:v},{default:r.withCtx(()=>[r.renderSlot(m.$slots,"icon-zoom-in",{},()=>[r.createVNode(r.unref(nc))])]),_:3})]),r.renderSlot(m.$slots,"control-zoom-out",{},()=>[r.createVNode(Ie,{class:"vue-flow__controls-zoomout",onClick:f},{default:r.withCtx(()=>[r.renderSlot(m.$slots,"icon-zoom-out",{},()=>[r.createVNode(r.unref(lc))])]),_:3})])],64)):r.createCommentVNode("",!0),e.showFitView?r.renderSlot(m.$slots,"control-fit-view",{key:1},()=>[r.createVNode(Ie,{class:"vue-flow__controls-fitview",onClick:x},{default:r.withCtx(()=>[r.renderSlot(m.$slots,"icon-fit-view",{},()=>[r.createVNode(r.unref(fc))])]),_:3})]):r.createCommentVNode("",!0),e.showInteractive?r.renderSlot(m.$slots,"control-interactive",{key:2},()=>[e.showInteractive?(r.openBlock(),r.createBlock(Ie,{key:0,class:"vue-flow__controls-interactive",onClick:g},{default:r.withCtx(()=>[r.unref(d)?r.renderSlot(m.$slots,"icon-unlock",{key:0},()=>[r.createVNode(r.unref(bc))]):r.createCommentVNode("",!0),r.unref(d)?r.createCommentVNode("",!0):r.renderSlot(m.$slots,"icon-lock",{key:1},()=>[r.createVNode(r.unref(pc))])]),_:3})):r.createCommentVNode("",!0)]):r.createCommentVNode("",!0),r.renderSlot(m.$slots,"default")]))}}),Sc=["x","y","width","height"],Cc=["stroke","stroke-width","d"],$c=["cx","cy","r","fill"],Mc={key:2,height:"100",width:"100"},Bc=["fill"],Rc=["x","y","fill"],zc={name:"Background"},Oc=r.defineComponent({...zc,props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},n=X(),o=r.toRef(n,"viewport"),i=r.computed(()=>{const u=e.gap&&e.gap*o.value.zoom,c=u&&o.value.x%u,d=u&&o.value.y%u,v=e.size*o.value.zoom;return{scaledGap:u,xOffset:c,yOffset:d,size:v}}),a=`pattern-${Math.floor(Math.random()*1e5)}`,l=r.computed(()=>e.patternColor||t[e.variant||"dots"]),s=r.computed(()=>`M${i.value.scaledGap/2} 0 V${i.value.scaledGap} M0 ${i.value.scaledGap/2} H${i.value.scaledGap}`);return(u,c)=>(r.openBlock(),r.createElementBlock("svg",{class:"vue-flow__background",style:r.normalizeStyle({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[r.renderSlot(u.$slots,"pattern-container",{id:a},()=>[r.createElementVNode("pattern",{id:a,x:i.value.xOffset,y:i.value.yOffset,width:i.value.scaledGap,height:i.value.scaledGap,patternUnits:"userSpaceOnUse"},[r.renderSlot(u.$slots,"pattern",{},()=>[e.variant==="lines"?(r.openBlock(),r.createElementBlock("path",{key:0,stroke:r.unref(l),"stroke-width":e.size,d:r.unref(s)},null,8,Cc)):e.variant==="dots"?(r.openBlock(),r.createElementBlock("circle",{key:1,cx:i.value.size,cy:i.value.size,r:i.value.size,fill:r.unref(l)},null,8,$c)):r.createCommentVNode("",!0),e.bgColor?(r.openBlock(),r.createElementBlock("svg",Mc,[r.createElementVNode("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,Bc)])):r.createCommentVNode("",!0)])],8,Sc)]),r.createElementVNode("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${a})`},null,8,Rc),r.renderSlot(u.$slots,"default",{id:a})],4))}});exports.Background=Oc;exports.BackgroundVariant=ii;exports.BaseEdge=be;exports.BezierEdge=Pt;exports.ConnectionLineType=we;exports.ConnectionMode=_e;exports.ControlButton=Ie;exports.Controls=Ec;exports.EdgeText=di;exports.GlobalVueFlowStorage=pe;exports.Handle=We;exports.MarkerType=ri;exports.MiniMap=Ku;exports.MiniMapNode=Vt;exports.NodeIdInjection=$n;exports.PanOnScrollMode=Ue;exports.Position=U;exports.SimpleBezierEdge=Tt;exports.SmoothStepEdge=Ye;exports.StepEdge=It;exports.StraightEdge=At;exports.VueFlow=Zu;exports.VueFlowInjection=mn;exports.addEdge=zs;exports.applyChanges=qe;exports.applyEdgeChanges=Hs;exports.applyNodeChanges=Ls;exports.defaultEdgeTypes=gi;exports.defaultNodeTypes=mi;exports.getBezierCenter=fi;exports.getBezierPath=An;exports.getConnectedEdges=Y;exports.getEdgeCenter=Vn;exports.getIncomers=Rs;exports.getMarkerId=ve;exports.getNodesInside=In;exports.getOutgoers=Bs;exports.getRectOfNodes=Ot;exports.getSimpleBezierCenter=vi;exports.getSimpleBezierPath=hi;exports.getSmoothStepPath=Nt;exports.getTransformForBounds=gn;exports.graphPosToZoomedPos=Ts;exports.isEdge=le;exports.isNode=Rt;exports.updateEdge=Os;exports.useHandle=Dn;exports.useVueFlow=X;exports.useZoomPanHelper=yi;
